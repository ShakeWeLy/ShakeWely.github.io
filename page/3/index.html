<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Weakliy_Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Weakliy_Blog">
<meta property="og:url" content="https://shakewely.github.io/page/3/index.html">
<meta property="og:site_name" content="Weakliy_Blog">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Weakliy">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Weakliy_Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/plugin/bganimation/bg.css">

  

  <link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" rel="stylesheet" type="text/css">
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <div class="outer">
        <div class="widget-wrap mobile-header">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://raw.githubusercontent.com/ShakeWeLy/Weakliy.github.io/main/%E5%A4%B4%E5%83%8F/mmexport1683194148817.png">
    <h2 class="author">Weakliy</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>101</strong><br>æ–‡ç« </div></a>
      <a href="/categories"><div><strong>0</strong><br>åˆ†ç±»</div></a>
      <a href="/tags"><div><strong>31</strong><br>æ ‡ç­¾</div></a>
    </div>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>ä¸»é¡µ</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>å½’æ¡£</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>åˆ†ç±»</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>æ ‡ç­¾</li>
          </a>
        
    </ul>
  </div>
</div>

        <section id="main">
  
    <article id="post-2025å¹´5æœˆ8æ—¥-MOTæ±‡æ€»" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/05/07/2025%E5%B9%B45%E6%9C%888%E6%97%A5-MOT%E6%B1%87%E6%80%BB/" class="article-date">
  <time class="post-time" datetime="2025-05-07T08:03:06.000Z" itemprop="datePublished">
    <span class="post-month">5æœˆ</span><br/>
    <span class="post-day">07</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/05/07/2025%E5%B9%B45%E6%9C%888%E6%97%A5-MOT%E6%B1%87%E6%80%BB/">2025å¹´5æœˆ8æ—¥ MOTæ±‡æ€»</a>
    </h1>
  

        <div>
          
          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ç›®å‰ï¼Œ<code>Tracking-by-detection</code>æˆä¸º <code>MOT</code> ä»»åŠ¡ä¸­æœ€æœ‰æ•ˆçš„èŒƒå¼ã€‚<code>Tracking-by-detection</code>åŒ…å«ä¸€ä¸ªæ­¥éª¤æ£€æµ‹æ­¥éª¤ï¼Œç„¶åæ˜¯ä¸€ä¸ªè·Ÿè¸ªæ­¥éª¤ã€‚è·Ÿè¸ªæ­¥éª¤é€šå¸¸ç”±2ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼š</p>
<ol>
<li>è¿åŠ¨æ¨¡å‹å’ŒçŠ¶æ€ä¼°è®¡ï¼Œç”¨äºé¢„æµ‹åç»­å¸§ä¸­è½¨è¿¹çš„è¾¹ç•Œæ¡†ã€‚<code>å¡å°”æ›¼æ»¤æ³¢å™¨</code> (KF) æ˜¯æ­¤ä»»åŠ¡çš„ä¸»æµé€‰æ‹©ã€‚</li>
<li>å°†æ–°å¸§æ£€æµ‹ä¸å½“å‰è½¨è¿¹é›†ç›¸å…³è”ã€‚</li>
</ol>
<p>å¯¹äºæ­¥éª¤2ï¼šæœ‰2ç§ä¸»è¦çš„æ–¹æ³•ç”¨äºå¤„ç†å…³è”ä»»åŠ¡ï¼š</p>
<ol>
<li>ç›®æ ‡çš„å®šä½ï¼Œä¸»è¦æ˜¯é¢„æµ‹è½¨è¿¹è¾¹ç•Œæ¡†å’Œæ£€æµ‹è¾¹ç•Œæ¡†ä¹‹é—´çš„IoUã€‚</li>
<li>ç›®æ ‡çš„å¤–è§‚æ¨¡å‹å’Œè§£å†³Re-IDä»»åŠ¡ã€‚</li>
</ol>
<p>è¿™2ç§æ–¹æ³•éƒ½è¢«é‡åŒ–ä¸ºè·ç¦»ï¼Œå¹¶ç”¨äºå°†å…³è”ä»»åŠ¡ä½œä¸ºå…¨å±€åˆ†é…é—®é¢˜æ¥è§£å†³ã€‚</p>
<p><img src="/2025/05/07/2025%E5%B9%B45%E6%9C%888%E6%97%A5-MOT%E6%B1%87%E6%80%BB/image-20250508093348216.png" alt="image-20250508093348216"></p>
<h1 id="dbt"><a class="markdownIt-Anchor" href="#dbt"></a> DBT</h1>
<h2 id="bytetrack"><a class="markdownIt-Anchor" href="#bytetrack"></a> Bytetrack</h2>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shakewely.github.io/2025/05/07/2025%E5%B9%B45%E6%9C%888%E6%97%A5-MOT%E6%B1%87%E6%80%BB/" data-id="cmanj8o290012lcv49q4h77kl" class="article-share-link">åˆ†äº«</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tracking/" rel="tag">tracking</a></li></ul>

    </footer>
  </div>
  
</article>




  
    <article id="post-2025å¹´5æœˆ7æ—¥-ReIDæ±‡æ€»" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/05/07/2025%E5%B9%B45%E6%9C%887%E6%97%A5-ReID%E6%B1%87%E6%80%BB/" class="article-date">
  <time class="post-time" datetime="2025-05-07T08:02:32.000Z" itemprop="datePublished">
    <span class="post-month">5æœˆ</span><br/>
    <span class="post-day">07</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/05/07/2025%E5%B9%B45%E6%9C%887%E6%97%A5-ReID%E6%B1%87%E6%80%BB/">2025å¹´5æœˆ7æ—¥ ReIDæ±‡æ€»</a>
    </h1>
  

        <div>
          
          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="é‡è¯†åˆ«å¯ä»¥åˆ†ä¸ºåŸºäºè¡¨å¾å­¦ä¹ çš„æ–¹æ³•å’ŒåŸºäºåº¦é‡å­¦ä¹ çš„æ–¹æ³•"><a class="markdownIt-Anchor" href="#é‡è¯†åˆ«å¯ä»¥åˆ†ä¸ºåŸºäºè¡¨å¾å­¦ä¹ çš„æ–¹æ³•å’ŒåŸºäºåº¦é‡å­¦ä¹ çš„æ–¹æ³•"></a> é‡è¯†åˆ«å¯ä»¥åˆ†ä¸ºåŸºäºè¡¨å¾å­¦ä¹ çš„æ–¹æ³•å’ŒåŸºäºåº¦é‡å­¦ä¹ çš„æ–¹æ³•</h3>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shakewely.github.io/2025/05/07/2025%E5%B9%B45%E6%9C%887%E6%97%A5-ReID%E6%B1%87%E6%80%BB/" data-id="cmanj8o290010lcv4cluh0rpw" class="article-share-link">åˆ†äº«</a>
      
      
    </footer>
  </div>
  
</article>




  
    <article id="post-2025å¹´5æœˆ5æ—¥-torchæ±‡æ€»" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/05/05/2025%E5%B9%B45%E6%9C%885%E6%97%A5-torch%E6%B1%87%E6%80%BB/" class="article-date">
  <time class="post-time" datetime="2025-05-05T02:35:44.000Z" itemprop="datePublished">
    <span class="post-month">5æœˆ</span><br/>
    <span class="post-day">05</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/05/05/2025%E5%B9%B45%E6%9C%885%E6%97%A5-torch%E6%B1%87%E6%80%BB/">2025å¹´5æœˆ5æ—¥ torchæ±‡æ€»</a>
    </h1>
  

        <div>
          
          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="module"><a class="markdownIt-Anchor" href="#module"></a> Module</h1>
<p>mymodule= MyModule()</p>
<p><code>Mymodule.bn.weight</code></p>
<p>mymodule.bn.weight.data</p>
<h1 id="parameters"><a class="markdownIt-Anchor" href="#parameters"></a> parameters</h1>
<p>å·ç§¯æ ¸ï¼ˆ<code>nn.Conv2d</code>ï¼‰çš„æƒé‡ç»´åº¦æ˜¯ <strong>[out_channels, in_channels, kernel_height, kernel_width]</strong></p>
<blockquote>
<p>RuntimeError: Given groups=1, weight of size [6, 3, 3, 3], expected input[1, 640, 640, 3] to have 3 channels, but got 640 channels instead</p>
</blockquote>
<p><strong>model.parameters()</strong></p>
<h1 id="grad"><a class="markdownIt-Anchor" href="#grad"></a> Grad</h1>
<h3 id="requires_grad"><a class="markdownIt-Anchor" href="#requires_grad"></a> requires_grad</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">model.bn.weight.requires_grad</span><br></pre></td></tr></table></figure>
<h1 id="é’©å­å‡½æ•°"><a class="markdownIt-Anchor" href="#é’©å­å‡½æ•°"></a> é’©å­å‡½æ•°</h1>
<blockquote>
<p><strong>é’©å­å‡½æ•°ï¼ˆHook Functionï¼‰*<em>æ˜¯å¯ä»¥ç»‘å®šåˆ° <code>nn.Module</code> çš„æŸä¸€å±‚ï¼ˆLayerï¼‰ä¸Šçš„å‡½æ•°ï¼Œåœ¨*<em>å‰å‘ä¼ æ’­ï¼ˆforwardï¼‰æˆ–åå‘ä¼ æ’­ï¼ˆbackwardï¼‰æ—¶è‡ªåŠ¨æ‰§è¡Œ</em></em>ï¼Œç”¨æ¥</strong>æå–ä¸­é—´ç‰¹å¾ã€ä¿®æ”¹æ¢¯åº¦æˆ–ä¸­é—´è¾“å‡ºã€è°ƒè¯•æ¨¡å‹ç­‰**ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯é’©å­å‡½æ•°hook-function"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯é’©å­å‡½æ•°hook-function"></a> âœ… ä»€ä¹ˆæ˜¯é’©å­å‡½æ•°ï¼ˆHook Functionï¼‰ï¼Ÿ</h3>
<p>åœ¨ PyTorch ä¸­ï¼Œ<strong>é’©å­å‡½æ•°ï¼ˆHook Functionï¼‰*<em>æ˜¯å¯ä»¥ç»‘å®šåˆ° <code>nn.Module</code> çš„æŸä¸€å±‚ï¼ˆLayerï¼‰ä¸Šçš„å‡½æ•°ï¼Œåœ¨*<em>å‰å‘ä¼ æ’­ï¼ˆforwardï¼‰æˆ–åå‘ä¼ æ’­ï¼ˆbackwardï¼‰æ—¶è‡ªåŠ¨æ‰§è¡Œ</em></em>ï¼Œç”¨æ¥</strong>æå–ä¸­é—´ç‰¹å¾ã€ä¿®æ”¹æ¢¯åº¦æˆ–ä¸­é—´è¾“å‡ºã€è°ƒè¯•æ¨¡å‹ç­‰**ã€‚</p>
<hr>
<h3 id="pytorch-ä¸­çš„é’©å­ç§ç±»"><a class="markdownIt-Anchor" href="#pytorch-ä¸­çš„é’©å­ç§ç±»"></a> ğŸ“Œ PyTorch ä¸­çš„é’©å­ç§ç±»ï¼š</h3>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>æ–¹æ³•</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>å‰å‘é’©å­</td>
<td><code>register_forward_hook()</code></td>
<td>åœ¨è¯¥å±‚ <strong>forwardè¾“å‡ºå</strong> è‡ªåŠ¨è°ƒç”¨</td>
</tr>
<tr>
<td>å‰å‘å‰é’©å­</td>
<td><code>register_forward_pre_hook()</code></td>
<td>åœ¨è¯¥å±‚ <strong>forwardè¾“å…¥å‰</strong> è°ƒç”¨</td>
</tr>
<tr>
<td>åå‘é’©å­</td>
<td><code>register_backward_hook()</code>ï¼ˆä¸æ¨èï¼‰æˆ– <code>register_full_backward_hook()</code></td>
<td>åœ¨è¯¥å±‚ <strong>backwardæ‰§è¡Œæ—¶</strong> è°ƒç”¨</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="ä¸ºä»€ä¹ˆè¦æ³¨å†Œé’©å­å‡½æ•°"><a class="markdownIt-Anchor" href="#ä¸ºä»€ä¹ˆè¦æ³¨å†Œé’©å­å‡½æ•°"></a> ğŸ§  ä¸ºä»€ä¹ˆè¦æ³¨å†Œé’©å­å‡½æ•°ï¼Ÿ</h3>
<p>ä½ è¿™æ®µä»£ç ä¸­ä½¿ç”¨ <code>register_forward_hook()</code>ï¼Œæ˜¯ä¸ºäº†åœ¨<strong>è’¸é¦è¿‡ç¨‹ä¸­æå–æ•™å¸ˆæ¨¡å‹å’Œå­¦ç”Ÿæ¨¡å‹æŸäº›å±‚çš„è¾“å‡ºç‰¹å¾</strong>ï¼Œè®¡ç®—ç‰¹å¾ä¹‹é—´çš„å·®å¼‚ä½œä¸ºè’¸é¦æŸå¤±ã€‚</p>
</blockquote>
<p><code>.data</code></p>
<h1 id="tensor"><a class="markdownIt-Anchor" href="#tensor"></a> tensor</h1>
<p>1ï¸âƒ£ view(shape)âœ…<br>
æ”¹å˜å¼ é‡å½¢çŠ¶ï¼ˆreshapeï¼‰ï¼Œä½†ä¸æ”¹å˜å†…å­˜å¸ƒå±€ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = torch.randn(2,3,4)</span><br><span class="line">y = x.view(6,4)</span><br><span class="line">print(y.shape)  # torch.Size([6, 4])</span><br></pre></td></tr></table></figure>
<hr>
<p>2ï¸âƒ£ <strong>reshape(shape)</strong><br>
ç±»ä¼¼ <code>view</code>ï¼Œä½†æ›´çµæ´»ï¼Œæ”¯æŒéè¿ç»­å†…å­˜ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.randn(2,3,4)</span><br><span class="line">y = x.reshape(6,4)</span><br><span class="line">print(y.shape)  # torch.Size([6, 4])</span><br></pre></td></tr></table></figure>
<hr>
<p>3ï¸âƒ£ <strong>squeeze(dim=None)</strong><br>
å»æ‰æ‰€æœ‰ä¸º1çš„ç»´åº¦ï¼Œæˆ–è€…æŒ‡å®šç»´åº¦çš„1ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.randn(2,1,3)</span><br><span class="line">y = x.squeeze()</span><br><span class="line">print(y.shape)  # torch.Size([2,3])</span><br><span class="line">y2 = x.squeeze(1)</span><br><span class="line">print(y2.shape)  # torch.Size([2,3])</span><br></pre></td></tr></table></figure>
<hr>
<p>4ï¸âƒ£ <strong>unsqueeze(dim)</strong><br>
åœ¨æŒ‡å®šä½ç½®æ’å…¥ç»´åº¦1ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.randn(2,3)</span><br><span class="line">y = x.unsqueeze(1)</span><br><span class="line">print(y.shape)  # torch.Size([2,1,3])</span><br></pre></td></tr></table></figure>
<hr>
<p>5ï¸âƒ£ **transpose(dim0, dim1)**âœ…<br>
åªäº¤æ¢ä¸¤ä¸ªç»´åº¦ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = torch.randn(2,3,4)</span><br><span class="line">y = x.transpose(1,2)</span><br><span class="line">print(y.shape)  # torch.Size([2,4,3])</span><br></pre></td></tr></table></figure>
<hr>
<p>6ï¸âƒ£ **permute(dims)**âœ…<br>
ä»»æ„ç»´åº¦æ¢åºã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = torch.randn(2,3,4)</span><br><span class="line">y = x.permute(0,2,1)</span><br><span class="line">print(y.shape)  # torch.Size([2,4,3])</span><br></pre></td></tr></table></figure>
<hr>
<p>7ï¸âƒ£ <strong>contiguous()</strong><br>
è¿”å›å†…å­˜è¿ç»­çš„ tensorï¼ˆä¸€èˆ¬ <code>view</code> å‰ç”¨ï¼‰ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.randn(2,3,4).transpose(1,2)</span><br><span class="line">y = x.contiguous().view(2,12)</span><br><span class="line">print(y.shape)  # torch.Size([2,12])</span><br></pre></td></tr></table></figure>
<hr>
<p>8ï¸âƒ£ <strong>to(device)</strong><br>
è½¬ç§»åˆ°æŒ‡å®šè®¾å¤‡ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.randn(2,3)</span><br><span class="line">y = x.to(&#x27;cuda&#x27;)</span><br></pre></td></tr></table></figure>
<hr>
<p>9ï¸âƒ£ <strong>cpu() / cuda()</strong><br>
ç®€å†™ç‰ˆçš„ to(â€˜cpuâ€™) æˆ– to(â€˜cudaâ€™)</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.randn(2,3).cuda()</span><br><span class="line">y = x.cpu()</span><br></pre></td></tr></table></figure>
<hr>
<p>ğŸ”Ÿ <strong>clone()</strong><br>
å¤åˆ¶ tensorï¼ˆæ–°å¼€å†…å­˜ï¼‰ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.randn(2,3)</span><br><span class="line">y = x.clone()</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£1ï¸âƒ£ <strong>detach()</strong><br>
è¿”å›ä¸€ä¸ªä¸å‚ä¸è®¡ç®—å›¾çš„æ–° tensorã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.randn(2,3, requires_grad=True)</span><br><span class="line">y = x.detach()</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£2ï¸âƒ£ <strong>item()</strong><br>
è¿”å›å•å…ƒç´  tensor çš„ python æ•°å€¼ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.tensor([3.14])</span><br><span class="line">v = x.item()  # 3.14 (float)</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£3ï¸âƒ£ <strong>numpy()</strong><br>
è½¬ä¸º numpy æ•°ç»„ï¼ˆå…±äº«å†…å­˜ï¼‰ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.randn(2,3)</span><br><span class="line">arr = x.numpy()</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£4ï¸âƒ£ <strong>size(dim=None)</strong><br>
è¿”å›ç»´åº¦å¤§å°ï¼Œdim=None è¿”å›å…¨éƒ¨ shapeã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.randn(2,3,4)</span><br><span class="line">print(x.size())     # torch.Size([2,3,4])</span><br><span class="line">print(x.size(1))    # 3</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£5ï¸âƒ£ <strong>shape</strong><br>
å±æ€§ï¼Œç­‰ä»·äº <code>size()</code>ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.randn(2,3,4)</span><br><span class="line">print(x.shape)  # torch.Size([2,3,4])</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£6ï¸âƒ£ <strong>numel()</strong><br>
å¼ é‡å…ƒç´ æ€»æ•°ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.randn(2,3,4)</span><br><span class="line">print(x.numel())  # 24</span><br></pre></td></tr></table></figure>
<h1 id="torchcuda"><a class="markdownIt-Anchor" href="#torchcuda"></a> torch.cuda</h1>
<p>1ï¸âƒ£ <strong>torch.cuda.is_available()</strong><br>
æ£€æŸ¥å½“å‰ PyTorch æ˜¯å¦å¯ä»¥ä½¿ç”¨ GPUã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.cuda.is_available()  # True / False</span><br></pre></td></tr></table></figure>
<hr>
<p>2ï¸âƒ£ <strong>torch.cuda.device_count()</strong><br>
è¿”å›å¯ç”¨çš„ GPU æ•°é‡ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.cuda.device_count()  # å¦‚ 2</span><br></pre></td></tr></table></figure>
<hr>
<p>3ï¸âƒ£ <strong>torch.cuda.get_device_name(device=0)</strong><br>
è·å–æŒ‡å®š GPU çš„åç§°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.cuda.get_device_name(0)  # &#x27;NVIDIA GeForce RTX 4090&#x27;</span><br></pre></td></tr></table></figure>
<hr>
<p>4ï¸âƒ£ <strong>torch.cuda.current_device()</strong><br>
è¿”å›å½“å‰é»˜è®¤è®¾å¤‡çš„ç´¢å¼•ï¼ˆintï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.cuda.current_device()  # å¦‚ 0</span><br></pre></td></tr></table></figure>
<hr>
<p>5ï¸âƒ£ <strong>torch.cuda.set_device(device)</strong><br>
è®¾ç½®å½“å‰é»˜è®¤ä½¿ç”¨çš„ GPUã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.cuda.set_device(1)</span><br></pre></td></tr></table></figure>
<hr>
<p>6ï¸âƒ£ <strong>torch.cuda.memory_allocated(device=0)</strong><br>
è¿”å›å½“å‰åˆ†é…ç»™å¼ é‡çš„æ˜¾å­˜å¤§å°ï¼ˆå•ä½ï¼šå­—èŠ‚ï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.cuda.memory_allocated(0) / 1024**2  # å•ä½ï¼šMB</span><br></pre></td></tr></table></figure>
<hr>
<p>7ï¸âƒ£ <strong>torch.cuda.memory_reserved(device=0)</strong><br>
è¿”å›ä¸ºåˆ†é…é¢„ç•™çš„æ˜¾å­˜ï¼ˆç”¨äºç¼“å­˜æœºåˆ¶ï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.cuda.memory_reserved(0) / 1024**2  # å•ä½ï¼šMB</span><br></pre></td></tr></table></figure>
<hr>
<p>8ï¸âƒ£ <strong>torch.cuda.empty_cache()</strong><br>
é‡Šæ”¾æœªä½¿ç”¨çš„æ˜¾å­˜ç¼“å­˜ï¼ˆä¸ä¼šé‡Šæ”¾å·²ä½¿ç”¨çš„æ˜¾å­˜ï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.cuda.empty_cache()</span><br></pre></td></tr></table></figure>
<hr>
<p>9ï¸âƒ£ <strong>torch.cuda.synchronize(device=None)</strong><br>
ç­‰å¾…æ‰€æœ‰ GPU æ“ä½œå®Œæˆï¼ˆç”¨äºè®¡æ—¶æ—¶ç²¾å‡†ï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.cuda.synchronize()</span><br></pre></td></tr></table></figure>
<hr>
<p>ğŸ”Ÿ <strong>torch.cuda.Stream / torch.cuda.Event</strong><br>
ç”¨äºæ‰‹åŠ¨æ§åˆ¶ CUDA æ“ä½œé¡ºåºï¼ˆé«˜çº§ç”¨æ³•ï¼‰ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘stream = torch.cuda.Stream()</span><br><span class="line">event = torch.cuda.Event()</span><br></pre></td></tr></table></figure>
<h1 id="model"><a class="markdownIt-Anchor" href="#model"></a> model</h1>
<p><strong><code>m.weight</code></strong>ï¼šè·å–<code>BatchNorm2d</code>å±‚çš„æƒé‡å‚æ•°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">w = m.weight.abs().detach()</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">b = m.bias.abs().detach()</span><br></pre></td></tr></table></figure>
<p>1ï¸âƒ£ **<code>model.parameters()</code>**âœ…<br>
è¿”å›ä¸€ä¸ªç”Ÿæˆå™¨ï¼ŒåªåŒ…å«æ¨¡å‹ä¸­æ‰€æœ‰å‚æ•°ï¼ˆ<code>nn.Parameter</code> ç±»å‹ï¼‰ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for param in model.parameters():</span><br><span class="line">    print(param.shape)</span><br><span class="line">    param.nelement() * param.element_size()</span><br></pre></td></tr></table></figure>
<hr>
<p>2ï¸âƒ£ <strong><code>model.named_parameters()</code></strong> âœ…<br>
è¿”å› <code>(name, param)</code> å…ƒç»„çš„ç”Ÿæˆå™¨ï¼Œå¸¦æœ‰åå­—ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">]for name, param in model.named_parameters():</span><br><span class="line">    print(name, param.shape)</span><br></pre></td></tr></table></figure>
<hr>
<p>3ï¸âƒ£ <strong><code>model.children()</code></strong><br>
è¿”å›æ¨¡å‹çš„<strong>ç¬¬ä¸€å±‚å­æ¨¡å—</strong>ï¼Œä¸é€’å½’ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘for child in model.children():</span><br><span class="line">    print(child)  # åªæ˜¯ä¸€å±‚ï¼Œä¾‹å¦‚ Conv, ReLU, Linear</span><br></pre></td></tr></table></figure>
<hr>
<p>4ï¸âƒ£ <strong><code>model.named_children()</code></strong><br>
è¿”å› <code>(name, module)</code> çš„ç”Ÿæˆå™¨ï¼Œç¬¬ä¸€å±‚å­æ¨¡å—å¸¦åå­—ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘for name, module in model.named_children():</span><br><span class="line">    print(name, module)</span><br></pre></td></tr></table></figure>
<hr>
<p>5ï¸âƒ£ <strong><code>model.modules()</code></strong><br>
è¿”å›æ¨¡å‹ä¸­æ‰€æœ‰æ¨¡å—ï¼ˆåŒ…æ‹¬è‡ªèº«å’Œé€’å½’å­æ¨¡å—ï¼‰ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘for module in model.modules():</span><br><span class="line">    print(type(module))</span><br></pre></td></tr></table></figure>
<hr>
<p>6ï¸âƒ£ <strong><code>model.named_modules()</code></strong><br>
è¿”å› <code>(name, module)</code> å½¢å¼çš„æ‰€æœ‰æ¨¡å—ï¼ˆé€’å½’ + åŒ…æ‹¬è‡ªèº«ï¼‰ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘for name, module in model.named_modules():</span><br><span class="line">    print(name, module)</span><br></pre></td></tr></table></figure>
<hr>
<p>7ï¸âƒ£ <strong><code>model.state_dict()</code></strong><br>
è¿”å›åŒ…å«æ‰€æœ‰å‚æ•°å’Œç¼“å†²åŒºï¼ˆå¦‚ <code>running_mean</code>ï¼‰çš„å­—å…¸ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘for name, tensor in model.state_dict().items():</span><br><span class="line">    print(name, tensor.shape)</span><br></pre></td></tr></table></figure>
<hr>
<p>8ï¸âƒ£ <strong><code>model.load_state_dict(state_dict)</code></strong><br>
åŠ è½½ <code>.pth</code> æ–‡ä»¶ä¿å­˜çš„æƒé‡ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">model.load_state_dict(torch.load(&#x27;xxx.pth&#x27;))</span><br></pre></td></tr></table></figure>
<hr>
<p>9ï¸âƒ£ <strong><code>model.eval()</code> / <code>model.train()</code></strong><br>
åˆ‡æ¢æ¨¡å‹æ¨¡å¼ï¼ˆå½±å“ Dropout / BatchNorm ç­‰ï¼‰ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘model.eval()   # æ¨ç†æ¨¡å¼</span><br><span class="line">model.train()  # è®­ç»ƒæ¨¡å¼</span><br></pre></td></tr></table></figure>
<hr>
<p>ğŸ”Ÿ <strong><code>model.zero_grad()</code></strong><br>
æ¸…ç©ºæ‰€æœ‰å‚æ•°çš„æ¢¯åº¦ï¼ˆç­‰æ•ˆäº <code>optimizer.zero_grad()</code>ï¼‰ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">model.zero_grad()</span><br></pre></td></tr></table></figure>
<h1 id="torch"><a class="markdownIt-Anchor" href="#torch"></a> torch</h1>
<p><code>torch.sort</code> æ˜¯ PyTorch ä¸­ç”¨äºå¯¹å¼ é‡è¿›è¡Œæ’åºçš„å‡½æ•°ã€‚</p>
<ul>
<li><code>descending=True</code> è¡¨ç¤ºæŒ‰é™åºæ’åºã€‚</li>
<li>è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªå…ƒç»„ <code>(sorted_tensor, indices)</code>ï¼Œå…¶ä¸­ <code>sorted_tensor</code> æ˜¯æ’åºåçš„å¼ é‡ï¼Œ<code>indices</code> æ˜¯æ’åºåçš„ç´¢å¼•ã€‚</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import torch</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºä¸€ä¸ªäºŒç»´å¼ é‡</span><br><span class="line">tensor = torch.tensor([[0.1, 0.5, 0.3], [0.9, 0.7, 0.2]])</span><br><span class="line"></span><br><span class="line"># è®¾ç½®æ¡ä»¶</span><br><span class="line">condition = tensor &gt; 0.4</span><br><span class="line"></span><br><span class="line"># ä½¿ç”¨ torch.where æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„å…ƒç´ çš„ç´¢å¼•</span><br><span class="line">indices = torch.where(condition)</span><br><span class="line"></span><br><span class="line">print(&quot;åŸå§‹å¼ é‡:&quot;, tensor)</span><br><span class="line">print(&quot;æ¡ä»¶:&quot;, condition)</span><br><span class="line">print(&quot;è¿”å›çš„ç´¢å¼•:&quot;, indices)</span><br></pre></td></tr></table></figure>
<p>1ï¸âƒ£ <strong>torch.stack(preds_cls)</strong><br>
æŠŠ <code>preds_cls</code> åˆ—è¡¨æ‹¼èµ·æ¥ï¼Œå¢åŠ ä¸€ä¸ªæ–°ç»´åº¦ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘preds_cls = [cls1, cls2, cls3]  # æ¯ä¸ª cls shape (B, C, H, W)</span><br><span class="line">torch.stack(preds_cls) â†’ (3, B, C, H, W)</span><br></pre></td></tr></table></figure>
<p>ç­‰ä»·äº <code>torch.stack(preds_cls, dim=0)</code></p>
<hr>
<p>2ï¸âƒ£ <strong>weights_cls.view(-1,1,1,1,1)</strong><br>
æŠŠ <code>(N,)</code> çš„æƒé‡ reshape æˆ <code>(N,1,1,1,1)</code>ï¼Œä¸ºäº†å’Œ <code>(N, B, C, H, W)</code> å¹¿æ’­ç›¸ä¹˜ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘weights_cls = torch.tensor([0.2, 0.3, 0.5])  # (3,)</span><br><span class="line">weights_cls.view(-1,1,1,1,1) â†’ (3,1,1,1,1)</span><br></pre></td></tr></table></figure>
<hr>
<p>3ï¸âƒ£ <strong>torch.sum(â€¦, dim=0)</strong><br>
æ²¿ç¬¬0ç»´ï¼ˆåˆ†æ”¯ç»´åº¦ï¼‰æ±‚å’Œï¼Œå¾—åˆ°èåˆåçš„æœ€ç»ˆé¢„æµ‹ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">final_out = torch.sum(preds_cls * weights_cls, dim=0)  # (B, C, H, W)</span><br></pre></td></tr></table></figure>
<hr>
<p>4ï¸âƒ£ <strong>einsum è®¡ç®—</strong><br>
ç”¨ <code>torch.einsum</code> è¡¨è¾¾æ›´ç´§å‡‘çš„è®¡ç®—ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.einsum(&#x27;n,nbchw-&gt;bchw&#x27;, weights_cls, preds_cls)</span><br></pre></td></tr></table></figure>
<p>ç­‰ä»·äºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.sum(weights_cls.view(-1,1,1,1,1) * preds_cls, dim=0)</span><br></pre></td></tr></table></figure>
<hr>
<p>5ï¸âƒ£ <strong><em>*init*</em>(512) â†’ forward(z, x)</strong><br>
åˆå§‹åŒ– <code>SiameseRPN</code>ï¼Œ512 æ˜¯ Conv3 çš„é€šé“æ•°ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘self.rpn3 = SiameseRPN(512)</span><br><span class="line">cls_out, reg_out = self.rpn3(z, x)  # z, x æ˜¯ Conv3 ç‰¹å¾</span><br></pre></td></tr></table></figure>
<hr>
<p>6ï¸âƒ£ <strong>torch.chunk(x, 2, dim=1)</strong><br>
æŠŠ <code>x</code> åœ¨é€šé“ç»´ï¼ˆdim=1ï¼‰ä¸€åˆ†ä¸ºäºŒã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x1, x2 = torch.chunk(x, 2, dim=1)</span><br><span class="line"># x1, x2 â†’ (B, C//2, H, W)</span><br></pre></td></tr></table></figure>
<hr>
<p>7ï¸âƒ£ <strong>torch.eye(H, device=x.device, dtype=x.dtype)</strong><br>
ç”Ÿæˆä¸€ä¸ª H Ã— H çš„å•ä½çŸ©é˜µã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">I = torch.eye(H, device=x.device, dtype=x.dtype)  # (H, H)</span><br></pre></td></tr></table></figure>
<p>8ï¸âƒ£ <strong>torch.cat(tensors, dim)</strong><br>
æŠŠ tensor åˆ—è¡¨æŒ‰æŒ‡å®šç»´æ‹¼æ¥èµ·æ¥ï¼ˆä¸å¢åŠ æ–°ç»´åº¦ï¼‰ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘tensors = [t1, t2, t3]  # æ¯ä¸ª t shape (B, C, H, W)</span><br><span class="line">torch.cat(tensors, dim=1) â†’ (B, C*3, H, W)</span><br></pre></td></tr></table></figure>
<hr>
<p>9ï¸âƒ£ <strong>torch.unsqueeze(x, dim)</strong><br>
åœ¨ dim ä½ç½®å¢åŠ ä¸€ä¸ªæ–°ç»´åº¦ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x.shape â†’ (B, C, H, W)</span><br><span class="line">torch.unsqueeze(x, dim=1) â†’ (B, 1, C, H, W)</span><br></pre></td></tr></table></figure>
<hr>
<p>ğŸ”Ÿ <strong>torch.squeeze(x, dim)</strong><br>
å»æ‰ dim ç»´åº¦ä¸Šçš„1ç»´ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x.shape â†’ (B, 1, C, H, W)</span><br><span class="line">torch.squeeze(x, dim=1) â†’ (B, C, H, W)</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£1ï¸âƒ£ <strong>torch.permute(x, dims)</strong><br>
äº¤æ¢ç»´åº¦é¡ºåºã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x.shape â†’ (B, C, H, W)</span><br><span class="line">torch.permute(x, (0,2,3,1)) â†’ (B, H, W, C)</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£2ï¸âƒ£ <strong>torch.transpose(x, dim0, dim1)</strong><br>
äº¤æ¢ä¸¤ä¸ªç»´åº¦ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x.shape â†’ (B, C, H, W)</span><br><span class="line">torch.transpose(x, 1, 2) â†’ (B, H, C, W)</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£3ï¸âƒ£ <strong>torch.mean(x, dim, keepdim=False)</strong><br>
åœ¨æŒ‡å®šç»´æ±‚å¹³å‡ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x.shape â†’ (B, C, H, W)</span><br><span class="line">torch.mean(x, dim=2) â†’ (B, C, W)</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£4ï¸âƒ£ <strong>torch.max(x, dim, keepdim=False)</strong><br>
åœ¨æŒ‡å®šç»´å–æœ€å¤§å€¼ï¼ˆè¿”å›å€¼å’Œç´¢å¼•ï¼‰ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘vals, idxs = torch.max(x, dim=2)</span><br><span class="line">vals.shape â†’ (B, C, W)</span><br><span class="line">idxs.shape â†’ (B, C, W)</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£5ï¸âƒ£ <strong>torch.clamp(x, min, max)</strong><br>
æŠŠå€¼è£å‰ªåˆ° [min, max] åŒºé—´ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.tensor([-1, 0.5, 2])</span><br><span class="line">torch.clamp(x, 0, 1) â†’ tensor([0., 0.5, 1.])</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£6ï¸âƒ£ <strong>torch.where(condition, x, y)</strong><br>
æŒ‰æ¡ä»¶é€‰æ‹©ï¼Œcondition=True å– xï¼Œå¦åˆ™å– yã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘a = torch.tensor([1, 2, 3])</span><br><span class="line">b = torch.tensor([10, 20, 30])</span><br><span class="line">cond = a &gt; 1</span><br><span class="line">torch.where(cond, a, b) â†’ tensor([10, 2, 3])</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£7ï¸âƒ£ <strong>torch.linspace(start, end, steps)</strong><br>
ç”Ÿæˆç­‰é—´éš”åºåˆ—ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.linspace(0,1,5) â†’ tensor([0., 0.25, 0.5, 0.75, 1.])</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£8ï¸âƒ£ <strong>torch.arange(start, end, step)</strong><br>
ç”Ÿæˆç­‰æ­¥é•¿åºåˆ—ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.arange(0,5,1) â†’ tensor([0,1,2,3,4])</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£9ï¸âƒ£ <strong>torch.nn.functional.one_hot(indices, num_classes)</strong><br>
æŠŠç´¢å¼•è½¬ä¸º one-hot ç¼–ç ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘idx = torch.tensor([0,2,1])</span><br><span class="line">torch.nn.functional.one_hot(idx, num_classes=3) â†’ </span><br><span class="line">tensor([[1,0,0],</span><br><span class="line">        [0,0,1],</span><br><span class="line">        [0,1,0]])</span><br></pre></td></tr></table></figure>
<hr>
<p>2ï¸âƒ£0ï¸âƒ£ <strong>x.view_as(y)</strong><br>
æŠŠ x reshape æˆå’Œ y ç›¸åŒçš„å½¢çŠ¶ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘x = torch.arange(6)</span><br><span class="line">y = torch.zeros(2,3)</span><br><span class="line">x.view_as(y) â†’ shape (2,3)</span><br></pre></td></tr></table></figure>
<p>1ï¸âƒ£5ï¸âƒ£ <strong>torch.cuda.amp.autocast</strong><br>
æ··åˆç²¾åº¦æ¨ç† / è®­ç»ƒã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pythonå¤åˆ¶ç¼–è¾‘with torch.cuda.amp.autocast():</span><br><span class="line">    output = model(input)</span><br></pre></td></tr></table></figure>
<hr>
<p>1ï¸âƒ£6ï¸âƒ£ <strong>torch.nn.utils.clip_grad_norm_</strong><br>
æ¢¯åº¦è£å‰ªï¼ˆé˜²æ­¢æ¢¯åº¦çˆ†ç‚¸ï¼‰ã€‚</p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">python</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å¤åˆ¶ç¼–è¾‘</span><br><span class="line">torch.nn.utils.clip_grad_norm_(model.parameters(), max_norm=1.0)</span><br></pre></td></tr></table></figure>
<p>inplace=False</p>
<p>RuntimeError: one of the variables needed for gradient computation has been modified by an inplace operation: [torch.cuda.FloatTensor [32, 2048, 32, 32]], which is output 0 of ReluBackward0, is at version 3; expected version 1 instead. Hint: enable anomaly detection to find the operation that failed to compute its gradient, with torch.autograd.set_detect_anomaly(True).</p>
<p>RuntimeError: cuDNN error: CUDNN_STATUS_INTERNAL_ERROR</p>
<p>GPU å†…å­˜ä¸è¶³æˆ– CUDA æ“ä½œä¸å½“å¯¼è‡´çš„ã€‚è®©æˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ–¹å¼è§£å†³è¿™ä¸ªé—®é¢˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    if is_pretrain:</span><br><span class="line"></span><br><span class="line">â€‹      \# é¢„è®­ç»ƒæ—¶ä½¿ç”¨è¾ƒå°çš„å­¦ä¹ ç‡</span><br><span class="line"></span><br><span class="line">â€‹      self.optimizer = optim.Adam(model.parameters(), lr=1e-5)</span><br><span class="line"></span><br><span class="line">â€‹    else:</span><br><span class="line"></span><br><span class="line">â€‹      \# å¾®è°ƒæ—¶ä½¿ç”¨è¾ƒå¤§çš„å­¦ä¹ ç‡</span><br><span class="line"></span><br><span class="line">â€‹      self.optimizer = optim.Adam(model.parameters(), lr=1e-4)</span><br></pre></td></tr></table></figure>
<h3 id="å°ç»“"><a class="markdownIt-Anchor" href="#å°ç»“"></a> ğŸ“ å°ç»“</h3>
<table>
<thead>
<tr>
<th>å ç”¨éƒ¨åˆ†</th>
<th>æ¨ç†å æ¯”</th>
<th>è®­ç»ƒå æ¯”</th>
</tr>
</thead>
<tbody>
<tr>
<td>å‚æ•°</td>
<td>âœ…</td>
<td>âœ…</td>
</tr>
<tr>
<td>ç‰¹å¾å›¾</td>
<td>âœ…</td>
<td>âœ…âœ…âœ…</td>
</tr>
<tr>
<td>æ¢¯åº¦</td>
<td>âŒ</td>
<td>âœ…</td>
</tr>
<tr>
<td>ä¼˜åŒ–å™¨çŠ¶æ€</td>
<td>âŒ</td>
<td>âœ…</td>
</tr>
<tr>
<td>æ•°æ®ç¼“å­˜</td>
<td>âœ…ï¼ˆCPUï¼‰</td>
<td>âœ…ï¼ˆCPUï¼‰</td>
</tr>
</tbody>
</table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">ğŸŒŸ æ·±åº¦å­¦ä¹ ä¸­ï¼Œå“ªäº›å› ç´ å’Œå†…å­˜ï¼ˆmemoryï¼Œå æ¯”ï¼‰æœ‰å…³ï¼Ÿ</span><br><span class="line">è¿™é‡Œè¯´çš„å†…å­˜ä¸»è¦æŒ‡ æ˜¾å­˜ï¼ˆGPU memoryï¼‰ï¼Œä½†æœ‰äº›åŸåˆ™ä¹Ÿé€‚ç”¨äº CPU å†…å­˜ã€‚</span><br><span class="line"></span><br><span class="line">æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ‹†æˆå‡ éƒ¨åˆ†ï¼š</span><br><span class="line"></span><br><span class="line">âœ… 1. æ¨¡å‹å‚æ•°ï¼ˆparametersï¼‰</span><br><span class="line">åŒ…å«æƒé‡ã€åç½®ï¼ˆweights, biasesï¼‰ï¼Œæ¯ä¸ªå‚æ•°é€šå¸¸ç”¨ float32ï¼ˆ4å­—èŠ‚ï¼‰ã€float16ï¼ˆ2å­—èŠ‚ï¼‰ç­‰å­˜å‚¨ã€‚</span><br><span class="line"></span><br><span class="line">åªè¦æ¨¡å‹åŠ è½½åˆ° GPUï¼Œå°±å ç”¨å›ºå®šæ˜¾å­˜ã€‚</span><br><span class="line"></span><br><span class="line">ä¾‹å­ï¼š</span><br><span class="line"></span><br><span class="line">YOLOv8n â†’ ~3M å‚æ•°ï¼Œçº¦ 12MB (float32)</span><br><span class="line"></span><br><span class="line">YOLOv8x â†’ ~70M å‚æ•°ï¼Œçº¦ 280MB (float32)</span><br><span class="line"></span><br><span class="line">â†’ å’Œæ¨¡å‹è§„æ¨¡ç›´æ¥ç›¸å…³ï¼Œå å›ºå®šéƒ¨åˆ†æ˜¾å­˜ã€‚</span><br><span class="line"></span><br><span class="line">âœ… 2. ä¸­é—´ç‰¹å¾å›¾ï¼ˆfeature maps / activationsï¼‰</span><br><span class="line">ç½‘ç»œå‰å‘æ¨ç†ä¸­æ¯å±‚äº§ç”Ÿçš„è¾“å‡ºå¼ é‡ã€‚</span><br><span class="line"></span><br><span class="line">åœ¨è®­ç»ƒä¸­éœ€è¦ä¿å­˜è¿™äº›ç‰¹å¾å›¾æ¥åšåå‘ä¼ æ’­ï¼Œå› æ­¤è®­ç»ƒæ˜¾å­˜éœ€æ±‚å¤§çº¦æ˜¯æ¨ç†çš„ 2~3 å€ã€‚</span><br><span class="line"></span><br><span class="line">è¿™æ˜¯è®­ç»ƒä¸­ä¸»è¦åƒæ˜¾å­˜çš„éƒ¨åˆ†ã€‚</span><br><span class="line"></span><br><span class="line">å½±å“å› ç´ ï¼š</span><br><span class="line"></span><br><span class="line">è¾“å…¥å›¾åƒå¤§å°ï¼ˆH Ã— Wï¼‰</span><br><span class="line"></span><br><span class="line">batch size</span><br><span class="line"></span><br><span class="line">æ¨¡å‹çš„é€šé“æ•°ã€åˆ†è¾¨ç‡ã€å±‚æ•°</span><br><span class="line"></span><br><span class="line">ä¾‹å­ï¼š</span><br><span class="line">640Ã—640 å›¾åƒï¼Œbatch=1ï¼ŒYOLOv8n å ç”¨ â‰ˆ12GB</span><br><span class="line">640Ã—640 å›¾åƒï¼Œbatch=8ï¼ŒYOLOv8n å ç”¨ â‰ˆ810GB</span><br><span class="line"></span><br><span class="line">âœ… 3. æ¢¯åº¦ï¼ˆgradientsï¼‰</span><br><span class="line">è®­ç»ƒæ—¶éœ€è¦ä¸ºæ¯ä¸ªå‚æ•°å­˜å‚¨æ¢¯åº¦ï¼Œç”¨äºä¼˜åŒ–å™¨æ›´æ–°æƒé‡ã€‚</span><br><span class="line"></span><br><span class="line">é€šå¸¸å¤§å° â‰ˆ å‚æ•°å¤§å°ã€‚</span><br><span class="line"></span><br><span class="line">æ¨ç†æ—¶ä¸éœ€è¦ã€‚</span><br><span class="line"></span><br><span class="line">ä¾‹å­ï¼š</span><br><span class="line"></span><br><span class="line">å‚æ•° 100MB â†’ æ¢¯åº¦ä¹Ÿå¤§çº¦ 100MB</span><br><span class="line"></span><br><span class="line">âœ… 4. ä¼˜åŒ–å™¨çŠ¶æ€ï¼ˆoptimizer stateï¼‰</span><br><span class="line">åªæœ‰è®­ç»ƒæ—¶æ‰æœ‰ï¼Œä¾‹å¦‚ Adam ä¼˜åŒ–å™¨è¦å­˜åŠ¨é‡å’Œæ–¹å·®ã€‚</span><br><span class="line"></span><br><span class="line">é€šå¸¸æ˜¯å‚æ•°çš„ 2~4 å€å¤§å°ã€‚</span><br><span class="line"></span><br><span class="line">ä¾‹å­ï¼š</span><br><span class="line"></span><br><span class="line">Adam ä¼˜åŒ–å™¨ï¼Œ100MB å‚æ•° â†’ é¢å¤–çº¦ 200MB ä¼˜åŒ–å™¨çŠ¶æ€</span><br><span class="line"></span><br><span class="line">âœ… 5. è¾“å…¥æ•°æ®ç¼“å­˜ï¼ˆdata loading bufferï¼‰</span><br><span class="line">å¦‚æœç”¨ dataloader é¢„åŠ è½½æ•°æ®ï¼ˆæ¯”å¦‚ PyTorch DataLoader çš„ num_workers å¤§ã€pin_memory=Trueï¼‰ï¼Œå¯èƒ½å ç”¨æ¯”è¾ƒå¤š CPU å†…å­˜ã€‚</span><br><span class="line"></span><br><span class="line">å¯¹ GPU å†…å­˜å½±å“è¾ƒå°ï¼Œä½†éœ€è¦æ³¨æ„ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">å ç”¨æ¥æº	ä¸»è¦å’Œä»€ä¹ˆæœ‰å…³</span><br><span class="line">æ¨¡å‹æƒé‡	æ¨¡å‹è§„æ¨¡ï¼ˆnã€sã€mã€lã€xï¼‰</span><br><span class="line">è¾“å…¥æ•°æ®ç¼“å­˜	batch_size, num_workers, å›¾åƒåˆ†è¾¨ç‡</span><br><span class="line">æ•°æ®å¢å¼º	å¢å¼ºæ–¹å¼ã€å¤æ‚ç¨‹åº¦</span><br><span class="line">æ¨ç†è¾“å‡ºç¼“å­˜	æ¨ç†ä»»åŠ¡è§„æ¨¡ã€æ˜¯å¦åŠæ—¶è½ç›˜</span><br><span class="line">æ¡†æ¶å¼€é”€	æ¡†æ¶æœ¬èº«ï¼ˆPyTorch, TensorFlowï¼‰</span><br><span class="line">ç³»ç»Ÿå¤šè¿›ç¨‹/çº¿ç¨‹	ä»»åŠ¡æ•°ã€è¿›ç¨‹æ•°ã€çº¿ç¨‹æ•°</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>F.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shakewely.github.io/2025/05/05/2025%E5%B9%B45%E6%9C%885%E6%97%A5-torch%E6%B1%87%E6%80%BB/" data-id="cmanj8o28000wlcv4bsx0grzy" class="article-share-link">åˆ†äº«</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dl%EF%BC%8Cpyhton/" rel="tag">dlï¼Œpyhton</a></li></ul>

    </footer>
  </div>
  
</article>




  
    <article id="post-2025å¹´5æœˆ4æ—¥-yoloæ±‡æ€»" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/" class="article-date">
  <time class="post-time" datetime="2025-05-04T07:42:49.000Z" itemprop="datePublished">
    <span class="post-month">5æœˆ</span><br/>
    <span class="post-day">04</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/">2025å¹´5æœˆ4æ—¥ yoloç»†èŠ‚è¯¦è§£</a>
    </h1>
  

        <div>
          
          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="yoloç‰ˆæœ¬"><a class="markdownIt-Anchor" href="#yoloç‰ˆæœ¬"></a> Yoloç‰ˆæœ¬</h1>
<h2 id="yolo-v1"><a class="markdownIt-Anchor" href="#yolo-v1"></a> YOLO V1</h2>
<h2 id="yolo-v5"><a class="markdownIt-Anchor" href="#yolo-v5"></a> YOLO V5</h2>
<h3 id="csp"><a class="markdownIt-Anchor" href="#csp"></a> CSP</h3>
<p>å®šä¹‰: Conv + Nä¸ªResæ¨¡å— + Conv</p>
<blockquote>
<p>ä½œç”¨: ç‰¹å¾å¢å¼º</p>
</blockquote>
<p>ç»„æˆ:</p>
<ol>
<li>2</li>
<li>2</li>
<li>2</li>
<li>2</li>
</ol>
<p>ä¼˜ç‚¹:</p>
<p>åŒºåˆ«:</p>
<p>ç»†èŠ‚:</p>
<ol>
<li></li>
</ol>
<h3 id="spp"><a class="markdownIt-Anchor" href="#spp"></a> SPP</h3>
<p>å®šä¹‰:</p>
<blockquote>
<p>ä½œç”¨: ç‰¹å¾å¢å¼º+å…¨å±€ä¿¡æ¯</p>
</blockquote>
<p>ç»„æˆ:</p>
<ol>
<li>å¤šä¸ªä¸åŒk_sizeçš„maxpooling è¿›è¡Œconcat</li>
</ol>
<p>åŒºåˆ«:</p>
<h3 id="loss"><a class="markdownIt-Anchor" href="#loss"></a> loss</h3>
<p><code>[B, H, W, num_anchors*(4+cls+obj)]</code></p>
<h3 id="åˆ›æ–°å¤„ç†æ“ä½œ"><a class="markdownIt-Anchor" href="#åˆ›æ–°å¤„ç†æ“ä½œ"></a> åˆ›æ–°å¤„ç†æ“ä½œ</h3>
<h4 id="1-åˆ‡ç‰‡"><a class="markdownIt-Anchor" href="#1-åˆ‡ç‰‡"></a> 1 åˆ‡ç‰‡</h4>
<p>2</p>
<h2 id="yolo-v8"><a class="markdownIt-Anchor" href="#yolo-v8"></a> YOLO V8</h2>
<blockquote>
<p>ç‰¹ç‚¹: æ”¹è¿›</p>
</blockquote>
<h3 id="c2f"><a class="markdownIt-Anchor" href="#c2f"></a> C2F</h3>
<p>å®šä¹‰:  Concatenate to fusionï¼ˆå¯ä»¥ç†è§£ä¸ºâ€œèåˆåè¿æ¥â€ï¼‰</p>
<blockquote>
<p>ä½œç”¨:   <strong>ç‰¹å¾èåˆ</strong>å’Œ__<strong>æ¨¡å‹å‹ç¼©</strong></p>
</blockquote>
<p>ç»„æˆ:</p>
<ol>
<li>Conv</li>
<li>nä¸ªBottleneck</li>
<li>concat</li>
<li>Conv</li>
</ol>
<p>ä¼˜ç‚¹:</p>
<p>â€¦</p>
<p>åŒºåˆ«:</p>
<blockquote>
<p>V5: bottleneckæ•°æ®è¿›è¡Œconcatçš„æ–¹å¼ä¸åŒ(çº¿æ€§å‘å‰ä¸åˆ†çº§å‘å‰)</p>
</blockquote>
<p>ç»†èŠ‚:</p>
<ol>
<li>
<p>ä¸ºä»€ä¹ˆå¼€å§‹å’Œç»“æŸè¦ä½¿ç”¨1x1å·ç§¯</p>
<blockquote>
<p>1 å¼€å§‹: å‡ç»´</p>
<p>2  ç»“æŸ: é™ç»´</p>
</blockquote>
</li>
<li>
<p>bottlenetä¸ºä»€ä¹ˆä½¿ç”¨padding0å’Œ1çš„ä¸¤ä¸ªå·ç§¯</p>
<blockquote>
<p>1: **<code>1Ã—1 conv</code> æ²¡æœ‰ paddingï¼ˆpadding=0ï¼‰**åªåœ¨é€šé“ç»´åº¦åšå˜æ¢ï¼Œä¸ä¼šæ”¹å˜ç©ºé—´å¤§å°</p>
<p>2:<code>3Ã—3 conv</code>ï¼Œç©ºé—´ç‰¹å¾æå–ï¼Œç”¨ <code>padding=1</code> æ˜¯ä¸ºäº†ä¿æŒå°ºå¯¸</p>
</blockquote>
</li>
</ol>
<h3 id="sppf"><a class="markdownIt-Anchor" href="#sppf"></a> SPPF</h3>
<p>å®šä¹‰: å¿«é€Ÿé‡‘å­—å¡”</p>
<blockquote>
<p>ä½œç”¨: <strong>ç‰¹å¾å¢å¼ºæ¨¡å—</strong> +<strong>å¤šå°ºåº¦èåˆ</strong></p>
</blockquote>
<p>ç»„æˆ:</p>
<ol>
<li>å°†feature map åˆ†ä¸ºå¤šä¸ªä¸åŒsizeçš„è‹¥å¹²ä¸ªpath</li>
<li>è¿›è¡Œmax pooling</li>
<li>concat</li>
</ol>
<p>ä¼˜ç‚¹:</p>
<p><strong>ä¸åŒå¤§å°çš„æ„Ÿå—é‡</strong></p>
<p>PPF ç”¨è¿ç»­å¤šæ¬¡ <code>kernel=5</code> çš„æ± åŒ–ï¼Œé¿å…äº†å¹¶è¡Œä¸åŒ kernelï¼Œè½¬ä¸ºä¸²è¡Œç›¸åŒ kernel</p>
<p>åŒºåˆ«:</p>
<blockquote>
<p>V5 ä½¿ç”¨äº†ä¸åŒKçš„æ± åŒ–</p>
</blockquote>
<ol>
<li>
<p>ä¸ºä»€ä¹ˆè¦åœ¨backboneçš„æœ€åæ‰æ·»åŠ ?</p>
<blockquote>
<p>1: æœ€åæ˜¯é«˜çº§è¯­ä¹‰ æ±‡èšå…¨å±€ä¿¡æ¯maxpooling</p>
<p>2: æœ€åsizeå¾ˆå°è¿›è¡Œpooling ä¸ä¼šæŸå¤±ä¿¡æ¯</p>
</blockquote>
</li>
</ol>
<h3 id="detect"><a class="markdownIt-Anchor" href="#detect"></a> Detect</h3>
<img src="/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/image-20250507234632382.png" alt="image-20250507234632382" style="zoom:33%;">
<p><strong>ç»„æˆ:</strong></p>
<ol>
<li>è¾¹ç•Œæ¡†é¢„æµ‹</li>
<li>ç±»åˆ«é¢„æµ‹:</li>
</ol>
<h4 id="loss-2"><a class="markdownIt-Anchor" href="#loss-2"></a> loss</h4>
<p><strong>åŒºåˆ«</strong>: æ— ancher</p>
<p>YOLOv8 head è¾“å‡º <code>[B, H, W, 4+cls+obj]</code></p>
<h3 id="é—®é¢˜"><a class="markdownIt-Anchor" href="#é—®é¢˜"></a> é—®é¢˜:</h3>
<p>anchor-free ï¼šå¦‚æœå¤šä¸ªç›®æ ‡è½åœ¨ <strong>åŒä¸€ä¸ª cellï¼ˆåƒç´ ï¼‰ä¸­å¿ƒ</strong>ï¼š</p>
<ol>
<li>
<p><strong>center prior</strong>ï¼ˆä¸­å¿ƒå…ˆéªŒï¼‰:</p>
<blockquote>
<p>åªæœ‰ <strong>ä¸­å¿ƒç‚¹é™„è¿‘çš„ cellï¼ˆé€šå¸¸é™å®šä¸€ä¸ª radius åŒºåŸŸï¼‰</strong> æ‰æœ‰èµ„æ ¼è¢«åˆ†é…ä¸ºâ€œæ­£æ ·æœ¬â€</p>
</blockquote>
</li>
<li>
<p>YOLOv8 çš„ <strong>dynamic-k matchingï¼š</strong></p>
<blockquote>
<p>è®¡ç®—æ¯ä¸ªå€™é€‰æ­£æ ·æœ¬ï¼ˆä¸­å¿ƒé™„è¿‘ cellï¼‰çš„ IoU<br>
æŒ‰ IoU æ’åº<br>
é€šè¿‡ <strong>Î£IoU ç¡®å®šåŠ¨æ€çš„ kï¼ˆæ­£æ ·æœ¬æ•°ï¼‰</strong><br>
é€‰æ‹© top-k ä½œä¸ºæ­£æ ·æœ¬</p>
</blockquote>
</li>
<li>
<p>ğŸ‘‰ å¦‚æœä¸¤ä¸ªç›®æ ‡ä¸­å¿ƒç‚¹è½åœ¨ <strong>åŒä¸€ä¸ª cell</strong>ï¼š</p>
<blockquote>
<p>æŒ‰ç…§ <strong>center prior â†’ åŒä¸€ä¸ª cell ç¡®å®æ˜¯ä¸¤ä¸ªç›®æ ‡éƒ½â€œæƒ³åˆ†é…â€çš„ cell</strong></p>
<p>ä½†ï¼<strong>dynamic-k matching ä¼šç”¨ IoU æ’åºå†³å®šâ€œæ›´åˆé€‚â€åˆ†é…ç»™è°</strong><br>
â†’ æ›´é«˜ IoU çš„ç›®æ ‡ä¼šâ€œèµ¢â€ â†’ å¦ä¸€ä¸ªç›®æ ‡éœ€è¦â€œæ‰¾é™„è¿‘ cellâ€ä½œä¸ºæ­£æ ·æœ¬</p>
</blockquote>
</li>
</ol>
<h2 id="yolo-v11"><a class="markdownIt-Anchor" href="#yolo-v11"></a> YOLO V11</h2>
<blockquote>
<p>ç‰¹ç‚¹: æ”¹è¿›</p>
</blockquote>
<img src="/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/image-20250507230522250.png" alt="image-20250507230522250" style="zoom:33%;">
<h3 id="c3k2"><a class="markdownIt-Anchor" href="#c3k2"></a> C3K2</h3>
<p><strong>å®šä¹‰</strong>:  å°†bottlenetckæ”¹ä¸ºC3K</p>
<blockquote>
<p>ä½œç”¨:   <strong>ç‰¹å¾èåˆ</strong>å’Œ__<strong>æ¨¡å‹å‹ç¼©</strong></p>
</blockquote>
<p><strong>ç»„æˆ:</strong></p>
<ol>
<li>CBS</li>
<li>nä¸ªBottleneck = <strong>C3K</strong></li>
<li>concat</li>
<li>CBS</li>
</ol>
<h4 id="c3k"><a class="markdownIt-Anchor" href="#c3k"></a> C3K:</h4>
<ol>
<li>CBS</li>
<li>1 bottleneck = CBSx2 + res</li>
<li>concat: 12+ CBS</li>
<li>CBS</li>
</ol>
<p><strong>ä¼˜ç‚¹:</strong></p>
<p>1ï¸âƒ£ å¢åŠ ç½‘ç»œçš„æ·±åº¦å’Œéçº¿æ€§è¡¨è¾¾èƒ½åŠ›<br>
â†’ æ›´æ·±çš„è·¯å¾„å¯ä»¥å­¦åˆ°æ›´å¤æ‚çš„ç‰¹å¾</p>
<p>2ï¸âƒ£ æ›´é«˜çš„å‚æ•°å¤ç”¨æ•ˆç‡<br>
â†’ é€šè¿‡æ®‹å·®å’Œé‡å¤ç»“æ„ï¼Œé¿å…çº¯æ·±åº¦å¸¦æ¥çš„é€€åŒ–é—®é¢˜</p>
<p>3ï¸âƒ£ æé«˜å±€éƒ¨æ„Ÿå—é‡<br>
â†’ å¥—å¨ƒ bottleneck å¯ä»¥è®©å±€éƒ¨æ›´â€œé€šé€â€ï¼Œå‡å°‘ä¿¡æ¯å±è”½</p>
<p><strong>åŒºåˆ«:</strong></p>
<blockquote>
<p>V8: ç›¸å½“äºå¥—å¨ƒåŠ äº†æ·±åº¦,å¤šäº†ä¸€ä¸ªbottleneck</p>
</blockquote>
<p><strong>ç»†èŠ‚:</strong></p>
<h3 id="c2psa"><a class="markdownIt-Anchor" href="#c2psa"></a> C2PSA</h3>
<img src="/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/image-20250507232147155.png" alt="image-20250507232147155" style="zoom: 25%;">
<p><strong>å®šä¹‰:</strong></p>
<blockquote>
<p>ä½œç”¨:**è¡¥å……å…¨å±€æ„ŸçŸ¥èƒ½åŠ› **ä¼˜åŒ–æ¢¯åº¦ä¼ æ’­å’Œç½‘ç»œè®­ç»ƒæ•ˆæœ</p>
</blockquote>
<p><strong>ç»„æˆ:</strong></p>
<ol>
<li>ç±»ä¼¼C2fæ¨¡å—</li>
<li>bottleneck=PSAbBlock</li>
</ol>
<p><strong>PSA:</strong></p>
<h3 id="head"><a class="markdownIt-Anchor" href="#head"></a> head</h3>
<p><strong>åŒºåˆ«</strong>:æ·±åº¦å¯åˆ†ç¦»çš„æ–¹æ³•</p>
<h1 id="ç»“æ„åˆ†æ"><a class="markdownIt-Anchor" href="#ç»“æ„åˆ†æ"></a> ç»“æ„åˆ†æ</h1>
<h2 id="3-æ£€æµ‹å¤´"><a class="markdownIt-Anchor" href="#3-æ£€æµ‹å¤´"></a> 3 æ£€æµ‹å¤´</h2>
<p>è§£è€¦å¤´</p>
<blockquote>
<p>å³åˆ†å¼€è®¡ç®—BboxLosså’ŒClsLoss</p>
</blockquote>
<p><strong>reg_max</strong></p>
<p>å®šä¹‰:</p>
<blockquote>
<p>ä½œç”¨</p>
</blockquote>
<h1 id="ç»“æœåˆ†æ"><a class="markdownIt-Anchor" href="#ç»“æœåˆ†æ"></a> ç»“æœåˆ†æ</h1>
<h2 id="0-labels"><a class="markdownIt-Anchor" href="#0-labels"></a> 0 labels</h2>
<p><strong>labels</strong></p>
<p>å®šä¹‰: æ··æ·†çŸ©é˜µã€‚çŸ©é˜µçš„æ¯ä¸€åˆ—ä»£è¡¨ä¸€ä¸ªç±»çš„å®ä¾‹é¢„æµ‹ï¼Œè€Œæ¯ä¸€è¡Œè¡¨ç¤ºä¸€ä¸ªå®é™…çš„ç±»çš„å®ä¾‹ã€‚</p>
<blockquote>
<p>ä½œç”¨: æ˜¯å¦å°†ä¸¤ä¸ªä¸åŒçš„ç±»æ··æ·†äº†</p>
<p>åˆ†æ:</p>
<ol>
<li>ç¬¬ä¸€ä¸ªå›¾æ˜¯è®­ç»ƒé›†å¾—æ•°æ®é‡ï¼Œæ¯ä¸ªç±»åˆ«æœ‰å¤šå°‘ä¸ª</li>
<li>ç¬¬äºŒä¸ªæ˜¯æ¡†çš„å°ºå¯¸å’Œæ•°é‡</li>
<li>ç¬¬ä¸‰ä¸ªæ¡†çš„centerç‚¹çš„ä½ç½®ã€‚</li>
<li>ç¬¬å››ä¸ªæ˜¯labeldçš„é«˜å®½ç›¸æ¯”äºæ•´ä¸ªå›¾ç‰‡</li>
</ol>
</blockquote>
<img src="/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/labels.jpg" alt="labels" style="zoom:25%;">   
<p><strong>labels_correlogram</strong></p>
<p>å®šä¹‰: <strong>ç±»åˆ«ç›¸å…³æ€§çƒ­åŠ›å›¾ï¼ˆcorrelation heatmapï¼‰</strong>ã€‚</p>
<blockquote>
<p>ä½œç”¨: æ˜¯å¦å°†ä¸¤ä¸ªä¸åŒçš„ç±»æ··æ·†äº†</p>
<p>åˆ†æ: é¢œè‰²è¶Šæ·±ï¼Œè¡¨ç¤ºå¯¹åº”æ ‡ç­¾ä¹‹é—´çš„ç›¸å…³æ€§è¶Šå¼ºï¼›é¢œè‰²è¶Šæµ…ï¼Œè¡¨ç¤ºç›¸å…³æ€§è¶Šå¼±</p>
<ol>
<li>å“ªäº›<strong>æ ‡ç­¾ä¹‹é—´å…·æœ‰è¾ƒå¼ºçš„ç›¸å…³æ€§</strong></li>
<li>å¦‚æœæˆ‘ä»¬å‘ç°æŸäº›æ ‡ç­¾ä¹‹é—´çš„ç›¸å…³æ€§è¿‡å¼ºï¼Œå¯ä»¥è€ƒè™‘å°†å®ƒä»¬åˆå¹¶æˆä¸€ä¸ªæ ‡ç­¾ï¼Œä»è€Œç®€åŒ–æ¨¡å‹å¹¶æé«˜æ•ˆç‡ã€‚</li>
</ol>
</blockquote>
<img src="/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/labels_correlogram.jpg" alt="labels_correlogram" style="zoom:25%;">  
<h2 id="1-confusion_matrix"><a class="markdownIt-Anchor" href="#1-confusion_matrix"></a> 1 confusion_matrix</h2>
<p>å®šä¹‰: æ··æ·†çŸ©é˜µã€‚çŸ©é˜µçš„æ¯ä¸€åˆ—ä»£è¡¨ä¸€ä¸ªç±»çš„å®ä¾‹é¢„æµ‹ï¼Œè€Œæ¯ä¸€è¡Œè¡¨ç¤ºä¸€ä¸ªå®é™…çš„ç±»çš„å®ä¾‹ã€‚</p>
<blockquote>
<p>ä½œç”¨: æ˜¯å¦å°†ä¸¤ä¸ªä¸åŒçš„ç±»æ··æ·†äº†</p>
<p>åˆ†æ:</p>
<ol>
<li>left4 å®¹æ˜“è®¤ä¸ºæ˜¯background</li>
</ol>
</blockquote>
<img src="/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/confusion_matrix.png" alt="confusion_matrix" style="zoom: 15%;"> 
<h2 id="2-prprf1_curve"><a class="markdownIt-Anchor" href="#2-prprf1_curve"></a> 2  P&amp;R&amp;PR&amp;F1_curve</h2>
<p><strong>2.1 P_curve</strong></p>
<p>å®šä¹‰: å½“æˆ‘è®¾ç½®ç½®ä¿¡åº¦ä¸ºæŸä¸€æ•°å€¼çš„æ—¶å€™ï¼Œå„ä¸ªç±»åˆ«è¯†åˆ«çš„å‡†ç¡®ç‡ã€‚</p>
<blockquote>
<p>ä½œç”¨:</p>
</blockquote>
<img src="/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/P_curve.png" alt="P_curve" style="zoom:13%;"> 
<p><strong>2.2  R_curve</strong></p>
<p>å®šä¹‰: å½“æˆ‘è®¾ç½®ç½®ä¿¡åº¦ä¸ºæŸä¸€æ•°å€¼çš„æ—¶å€™ï¼Œå„ä¸ªç±»åˆ«è¯†åˆ«çš„å¬å›ç‡ï¼ˆæŸ¥å…¨ç‡ï¼‰å’Œç½®ä¿¡åº¦çš„å…³ç³»å›¾ã€‚</p>
<blockquote>
<p>ä½œç”¨:  è¶Šå…¨é¢</p>
</blockquote>
<p><img src="/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/_%E6%A1%8C%E9%9D%A2/train2/PR_curve.png" alt="PR_curve"></p>
<p><strong>3. PR_curve</strong></p>
<p>å®šä¹‰: ç²¾åº¦ä¸å¬å›ç‡æ›²çº¿</p>
<blockquote>
<p>ä½œç”¨:  ç²¾åº¦ä¸å¬å›ç‡çš„å…³ç³»</p>
<p>åˆ†æ: å¸Œæœ›mAPæ›²çº¿çš„é¢ç§¯å°½å¯èƒ½æ¥è¿‘1</p>
</blockquote>
<img src="/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/PR_curve.png" alt="PR_curve" style="zoom: 15%;"> 
<p><strong>4 F1_curve</strong></p>
<p>å®šä¹‰: <img src="/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/image-20250508182738579.png" alt="image-20250508182738579" style="zoom:33%;"></p>
<blockquote>
<p>ä½œç”¨: <strong>ç²¾ç¡®ç‡å’Œå¬å›ç‡çš„è°ƒå’Œå¹³å‡æ•°</strong></p>
<p>åˆ†æ:</p>
</blockquote>
<img src="/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/F1_curve.png" alt="F1_curve" style="zoom:15%;"> 
<h2 id="3-other"><a class="markdownIt-Anchor" href="#3-other"></a> 3 other</h2>
<p><strong>3.1 loss functions</strong></p>
<blockquote>
<p>å®šä¹‰: å„ç±»ä¿¡æ¯</p>
</blockquote>
<p><strong>3.2 result.csv</strong></p>
<blockquote>
<p>å®šä¹‰: è®­ç»ƒçš„è¾“å‡º results.txtä¸­æœ€åä¸‰åˆ—æ˜¯éªŒè¯é›†ç»“æœï¼Œå‰é¢çš„æ˜¯è®­ç»ƒé›†ç»“æœ</p>
</blockquote>
<p><strong>3.3 train_batchx|val_batchx_labels|val_batchx_pred</strong></p>
<blockquote>
<p>batchsizeâ€™åˆ†æ</p>
</blockquote>
<h1 id="æ¶ˆèå®éªŒ"><a class="markdownIt-Anchor" href="#æ¶ˆèå®éªŒ"></a> æ¶ˆèå®éªŒ</h1>
<table>
<thead>
<tr>
<th>Model</th>
<th>Layers</th>
<th>Params(M)</th>
<th>GFLOPs</th>
<th>mAP@0.5</th>
<th>mAP@0.5:0.95</th>
<th>Precision</th>
<th>Recall</th>
<th>Val Box</th>
<th>Val Cls</th>
<th>Val DFL</th>
</tr>
</thead>
<tbody>
<tr>
<td>wireï¼ˆYOLOv8sï¼‰</td>
<td>129</td>
<td>11.142</td>
<td>28.7</td>
<td><strong>0.97932</strong></td>
<td><strong>0.61878</strong></td>
<td>0.96333</td>
<td>0.95744</td>
<td>1.34446</td>
<td>0.68130</td>
<td>0.98080</td>
</tr>
<tr>
<td>wire-CBAM2</td>
<td>149</td>
<td>4.461</td>
<td>19.8</td>
<td>0.98499</td>
<td>0.65787</td>
<td>0.96523</td>
<td>0.96764</td>
<td>1.23725</td>
<td>0.60513</td>
<td>0.96018</td>
</tr>
<tr>
<td>wire-ghost</td>
<td>137</td>
<td>2.824</td>
<td>7.8</td>
<td>0.97932</td>
<td>0.61878</td>
<td>0.96333</td>
<td>0.95744</td>
<td>1.34446</td>
<td>0.68130</td>
<td>0.98080</td>
</tr>
<tr>
<td>wire-Ghost-C3ghost-GSCSP</td>
<td>291</td>
<td>5.857</td>
<td>17.4</td>
<td>0.97649</td>
<td>0.61437</td>
<td>0.95304</td>
<td>0.94231</td>
<td>1.34232</td>
<td>0.67661</td>
<td>0.97089</td>
</tr>
<tr>
<td>wire-Ghost-x-x-CBAM</td>
<td>162</td>
<td>3.399</td>
<td>15.5</td>
<td>0.97125</td>
<td>0.63970</td>
<td>0.94271</td>
<td>0.95166</td>
<td>1.28386</td>
<td>0.64999</td>
<td>0.96416</td>
</tr>
<tr>
<td>wire-Ghost-C3ghost-GSCSP-CBAM3</td>
<td>311</td>
<td>7.222</td>
<td>28.8</td>
<td>0.97058</td>
<td>0.61882</td>
<td>0.94713</td>
<td>0.95569</td>
<td>1.34975</td>
<td>0.69796</td>
<td>0.96739</td>
</tr>
<tr>
<td>wire-Ghost-C3ghost</td>
<td>259</td>
<td>3.136</td>
<td>8.9</td>
<td>0.96228</td>
<td>0.58690</td>
<td>0.87856</td>
<td>0.93795</td>
<td>1.43447</td>
<td>0.77993</td>
<td>0.96887</td>
</tr>
<tr>
<td>wire-C2Ghost-o</td>
<td>251</td>
<td>0.999</td>
<td>3.2</td>
<td>0.77162</td>
<td>0.34710</td>
<td>0.63183</td>
<td>0.79332</td>
<td>1.94767</td>
<td>1.21099</td>
<td>1.09901</td>
</tr>
</tbody>
</table>
<p>æ€»ç»“</p>
<table>
<thead>
<tr>
<th>æ¨¡å‹</th>
<th>Params(M)</th>
<th>â†“å‚æ•°å‹ç¼©</th>
<th>GFLOPs</th>
<th>â†“GFLOPs</th>
<th>mAP@0.5</th>
<th>Î”mAP@0.5</th>
<th>mAP@0.5:0.95</th>
<th>Î”mAP@0.5:95</th>
<th>ç»“è®º</th>
</tr>
</thead>
<tbody>
<tr>
<td>wire</td>
<td>11.142</td>
<td>-</td>
<td>28.7</td>
<td>-</td>
<td>0.97932</td>
<td>0</td>
<td>0.61878</td>
<td>0</td>
<td>åŸºå‡†</td>
</tr>
<tr>
<td>wire-ghost</td>
<td>2.824</td>
<td><strong>74.6%â†“</strong></td>
<td>7.8</td>
<td><strong>72.8%â†“</strong></td>
<td>0.97932</td>
<td>+0.00000</td>
<td>0.61878</td>
<td>+0.00000</td>
<td>æä¼˜</td>
</tr>
<tr>
<td>wire-CBAM2</td>
<td>4.461</td>
<td>59.9%â†“</td>
<td>19.8</td>
<td>31.0%â†“</td>
<td><strong>0.98499</strong></td>
<td><strong>+0.00567</strong></td>
<td><strong>0.65787</strong></td>
<td><strong>+0.03909</strong></td>
<td>å‡†ç¡®æ€§æœ€ä¼˜</td>
</tr>
<tr>
<td>wire-Ghost-C3ghost</td>
<td>3.136</td>
<td>71.8%â†“</td>
<td>8.9</td>
<td>69.0%â†“</td>
<td>0.96228</td>
<td>âˆ’0.01704</td>
<td>0.58690</td>
<td>âˆ’0.03188</td>
<td>ç¨³å¥ä½†ç•¥é™</td>
</tr>
<tr>
<td>wire-Ghost-C3ghost-GSCSP</td>
<td>5.857</td>
<td>47.4%â†“</td>
<td>17.4</td>
<td>39.3%â†“</td>
<td>0.97649</td>
<td>âˆ’0.00283</td>
<td>0.61437</td>
<td>âˆ’0.00441</td>
<td>å¹³è¡¡æœ€ä¼˜</td>
</tr>
<tr>
<td>wire-Ghost-C3ghost-GSCSP-CBAM</td>
<td>7.222</td>
<td>35.2%â†“</td>
<td>28.8</td>
<td>â‰ˆæŒå¹³</td>
<td>0.97068</td>
<td>âˆ’0.00864</td>
<td>0.63409</td>
<td>+0.01531</td>
<td>ç²¾åº¦æå‡è½»åº¦è¡¥å¿</td>
</tr>
<tr>
<td>wire-Ghost-x-x-CBAM</td>
<td>3.399</td>
<td>69.5%â†“</td>
<td>15.5</td>
<td>46.0%â†“</td>
<td>0.97125</td>
<td>âˆ’0.00807</td>
<td>0.63970</td>
<td>+0.02092</td>
<td>è½»é‡+CBAM å¹³è¡¡å‹</td>
</tr>
<tr>
<td>wire-C2Ghost-o</td>
<td>0.999</td>
<td><strong>91.0%â†“</strong></td>
<td>3.2</td>
<td><strong>88.9%â†“</strong></td>
<td>0.77162</td>
<td>âˆ’0.20770</td>
<td>0.34710</td>
<td>âˆ’0.27168</td>
<td>æç«¯è½»é‡ï¼ŒæŸå¤±å¤§</td>
</tr>
</tbody>
</table>
<blockquote>
<p>åœ¨ä¿æŒè¾ƒä½å‚æ•°é‡ï¼ˆ&lt;5Mï¼‰å’Œè®¡ç®—å¤æ‚åº¦ï¼ˆ&lt;20 GFLOPsï¼‰å‰æä¸‹ï¼Œ<code>Ghost + C3ghost + GSCSP + CBAM</code> çš„ç»„åˆåœ¨ mAP@0.5 ä¸ŠåŸºæœ¬ä¿æŒåœ¨ <strong>0.97 ä»¥ä¸Š</strong>ï¼Œæ€§èƒ½ä¸åŸå§‹ç»“æ„ç›¸å½“ç”šè‡³æ›´ä¼˜ã€‚</p>
</blockquote>
<blockquote>
<p>å®é™…æ¨ç†é€Ÿåº¦å’Œèµ„æºå ç”¨æ˜¾è‘—ä¼˜äºåŸç‰ˆ YOLOv8ã€‚é‡åŒ–åçš„æ¨¡å‹åœ¨ mAP@0.5 ä¸Šä»…æœ‰ <strong>0.5%-1% å·¦å³çš„ä¸‹é™</strong>ï¼Œä½†å¸¦æ¥äº† <strong>20%-40% çš„åŠ é€Ÿæå‡</strong>ï¼Œæ›´é€‚åˆåœ¨åµŒå…¥å¼æˆ–è¾¹ç¼˜è®¾å¤‡ä¸Šéƒ¨ç½²ã€‚</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shakewely.github.io/2025/05/04/2025%E5%B9%B45%E6%9C%884%E6%97%A5-yolo%E6%B1%87%E6%80%BB/" data-id="cmanj8o28000ylcv48vhi5odp" class="article-share-link">åˆ†äº«</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/YOLO/" rel="tag">YOLO</a></li></ul>

    </footer>
  </div>
  
</article>




  
    <article id="post-2025å¹´4æœˆ24æ—¥-è®­ç»ƒä¼˜åŒ–" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/04/24/2025%E5%B9%B44%E6%9C%8824%E6%97%A5-%E8%AE%AD%E7%BB%83%E4%BC%98%E5%8C%96/" class="article-date">
  <time class="post-time" datetime="2025-04-24T05:39:41.000Z" itemprop="datePublished">
    <span class="post-month">4æœˆ</span><br/>
    <span class="post-day">24</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/04/24/2025%E5%B9%B44%E6%9C%8824%E6%97%A5-%E8%AE%AD%E7%BB%83%E4%BC%98%E5%8C%96/">2025å¹´4æœˆ24æ—¥ è®­ç»ƒä¼˜åŒ–</a>
    </h1>
  

        <div>
          
          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="æ•°æ®"><a class="markdownIt-Anchor" href="#æ•°æ®"></a> æ•°æ®</h1>
<h2 id="1-æ ‡æ³¨ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#1-æ ‡æ³¨ä¼˜åŒ–"></a> 1 æ ‡æ³¨ä¼˜åŒ–</h2>
<p>âœ…<strong>1. å¸¸è§é—®é¢˜æ±‡æ€»</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ç›¸è¿çš„ä¸¤ä¸ªæ•°æ®æ˜¯ä¸€èµ·æ ‡è¿˜æ˜¯?</span><br><span class="line">åˆ¶é€ è¿›è¡Œæ ‡å®šæ•°æ®å¯ä»¥æŠŠä¹‹å‰å®Œæˆçš„æš‚æ—¶å…ˆè®¾ç½®ä¸ºæœªå®ŒæˆçŠ¶æ€</span><br><span class="line">æœ‰å¾ˆç›¸ä¼¼çš„ç‰©ä½“ ä½†æ˜¯ç›¸å¯¹ä½ç½®æ˜¯æ˜æ˜¾ä¸åŒçš„</span><br><span class="line">AIè¾…åŠ©æ ‡æ³¨å,è¦çº æ­£ä¸€äº›é”™è¯¯æ ‡æ³¨,AIçš„é”™è¯¯æ ·æœ¬å’Œå¾ˆå¤šç›¸åŒç›¸ä¼¼çš„æ•°æ®è¦åˆ é™¤,åˆ†æå“ªå‡ ä¸ªç±»åˆ«æ¯”è¾ƒå®¹æ˜“å‡ºé”™,ä¿ç•™ä¸€äº›éš¾æ ·æœ¬,å¢åŠ è¿™ç±»çš„æ ·æœ¬,å’Œå°‘è§æ¯”å¦‚æœ‰é®æŒ¡çš„æƒ…æ™¯ï¼Œå‡ºç°é®æŒ¡å¦‚ä½•å¤„ç†?éœ€ä¸éœ€è¦é‡æ–°æ ‡æ³¨å‘¢?</span><br><span class="line">æ¨¡å‹æ•ˆæœæ¯”æˆ‘æƒ³è±¡çš„è¦å¥½å¾ˆå¤šå•Š,å¾ˆå¤šæƒ³ä¸åˆ°çš„éƒ½èƒ½è¯†åˆ«æ­£ç¡®,å…³é”®æ˜¯åˆ«æ ‡é”™æ•°æ®äº†</span><br><span class="line">å¯¹äºå˜åŒ–ä¸å¤§,æ³›åŒ–èƒ½åŠ›è¦æ±‚ä¸é«˜çš„åœºæ™¯,å°†valçš„æ¯”ä¾‹æé«˜æ˜¯å¦æœ‰æ•ˆ?</span><br><span class="line">å¦‚æœå‘ç°ç¼ºæ¼çš„æ ‡ç­¾éœ€è¦å†æ·»åŠ ï¼Œå¯ä»¥è®­ç»ƒåªæ ‡å®šæ–°æ ‡ç­¾çš„å°modelè¾…åŠ©åç»­æ ‡æ³¨è€Œä¸ç”¨å…¨éƒ¨æ ‡ç­¾</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>å»ºè®®</th>
</tr>
</thead>
<tbody>
<tr>
<td>ç›¸è¿ç‰©ä½“ä¸€èµ·æ ‡ or åˆ†å¼€æ ‡ï¼Ÿ</td>
<td>æ ¹æ®ä»»åŠ¡éœ€æ±‚ï¼ŒåŒºåˆ† instance åˆ™åˆ†å¼€ï¼Œä¸åŒºåˆ†åˆ™åˆå¹¶æ ‡</td>
</tr>
<tr>
<td>æ ‡å®šæ•°æ®çŠ¶æ€ç®¡ç†</td>
<td>å·²å®Œæˆæ•°æ®å¯åˆ‡æ¢ä¸ºæœªå®Œæˆï¼Œç”¨çŠ¶æ€æ ‡è®°åšå¤æŸ¥</td>
</tr>
<tr>
<td>ç›¸ä¼¼ç‰©ä½“ä¸åŒä½ç½® â†’ class è®¾è®¡</td>
<td>æ¨èç”¨ä¸åŒ classï¼Œå¦‚æœ‰åå¤„ç†èƒ½åŠ›ä¹Ÿå¯ç»Ÿä¸€ class ååŒºåˆ†</td>
</tr>
<tr>
<td>AI æ ‡æ³¨åçº é”™ä¸å›°éš¾æ ·æœ¬é‡‡é›†</td>
<td>åˆ†æé«˜è¯¯å·®ç±»åˆ«ã€ä¿ç•™éš¾æ ·æœ¬ã€å¢åŠ å°‘è§æƒ…æ™¯ã€é®æŒ¡éœ€é‡æ–°æ ‡æ³¨</td>
</tr>
<tr>
<td>é®æŒ¡æ ·æœ¬æ ‡æ³¨</td>
<td>æ ‡å¯è§éƒ¨åˆ†å¹¶åŠ  occluded å±æ€§ï¼Œå®Œå…¨é®æŒ¡åˆ™ä¸æ ‡</td>
</tr>
<tr>
<td>val å æ¯”è°ƒæ•´</td>
<td>å˜åŒ–å°çš„åœºæ™¯å¯é€‚å½“å¢å¤§ val æ¯”ä¾‹ï¼ˆ<s>20</s>30%ï¼‰ï¼Œæ³¨æ„åˆ«å¤ªé«˜</td>
</tr>
</tbody>
</table>
<h1 id="è®­ç»ƒç›¸å…³"><a class="markdownIt-Anchor" href="#è®­ç»ƒç›¸å…³"></a> è®­ç»ƒç›¸å…³</h1>
<h2 id="1-è®­ç»ƒæ•°æ®æŒ‡æ ‡"><a class="markdownIt-Anchor" href="#1-è®­ç»ƒæ•°æ®æŒ‡æ ‡"></a> 1 è®­ç»ƒæ•°æ®æŒ‡æ ‡</h2>
<p>âœ… <strong>1. layersï¼ˆå±‚æ•°ï¼‰</strong></p>
<ul>
<li>è¡¨ç¤ºç½‘ç»œä¸­åŒ…å«çš„å±‚çš„æ•°é‡ï¼ˆå·ç§¯å±‚ã€BNå±‚ã€æ¿€æ´»å±‚ã€C3ghost æ¨¡å—ç­‰ï¼‰ã€‚</li>
<li><strong>å’Œæ˜¾å­˜å…³ç³»ï¼š</strong><br>
â†’ å±‚æ•°æœ¬èº«ä¸ç›´æ¥å†³å®šæ˜¾å­˜å ç”¨ï¼Œä½†æ›´æ·±çš„ç½‘ç»œå¾€å¾€éœ€è¦æ›´å¤šå‚æ•°å’Œä¸­é—´ç‰¹å¾ï¼Œè¿™ä¼šå¢åŠ æ˜¾å­˜éœ€æ±‚ã€‚</li>
</ul>
<hr>
<p>âœ… <strong>2. parametersï¼ˆå‚æ•°é‡ï¼‰</strong></p>
<ul>
<li>ç½‘ç»œä¸­çš„æ€»å‚æ•°æ•°é‡ï¼Œæ¯”å¦‚å·ç§¯æ ¸çš„æƒé‡ã€åç½®ç­‰ã€‚</li>
<li><strong>å’Œæ˜¾å­˜å…³ç³»ï¼š</strong><br>
â†’ éœ€è¦æ˜¾å­˜å­˜å‚¨è¿™äº›å‚æ•°ï¼Œé€šå¸¸å‚æ•°é‡è¾ƒå°ï¼ˆç™¾ä¸‡çº§ï¼‰æ—¶ï¼Œè¿™éƒ¨åˆ†æ˜¾å­˜å ç”¨è¾ƒä½ï¼ˆå‡ å MBï¼‰ã€‚<br>
â†’ ä¸»è¦å½±å“æ¨¡å‹åŠ è½½åˆ° GPU åçš„é™æ€æ˜¾å­˜å ç”¨ã€‚</li>
</ul>
<hr>
<p>âœ… <strong>3. gradientsï¼ˆæ¢¯åº¦æ•°ï¼‰</strong></p>
<ul>
<li>è®­ç»ƒæ—¶éœ€è¦ä¿å­˜æ¯ä¸ªå‚æ•°çš„æ¢¯åº¦ï¼Œç”¨äºåå‘ä¼ æ’­ã€‚</li>
<li><strong>å’Œæ˜¾å­˜å…³ç³»ï¼š</strong><br>
â†’ åœ¨è®­ç»ƒæ—¶ä¼šé¢å¤–å ç”¨å’Œå‚æ•°é‡å‡ ä¹ç›¸åŒçš„æ˜¾å­˜ã€‚<br>
â†’ å¦‚æœåªæ¨ç†ï¼ˆinferenceï¼‰ï¼Œæ¢¯åº¦ä¸è®¡ç®—ï¼Œä¸å ç”¨æ˜¾å­˜ã€‚</li>
</ul>
<hr>
<p>âœ… <strong>4. GFLOPsï¼ˆæ¯ç§’åäº¿æ¬¡æµ®ç‚¹è¿ç®—ï¼‰</strong></p>
<ul>
<li>æ¯æ¬¡å‰å‘æ¨ç†æ‰€éœ€çš„å¤§çº¦è®¡ç®—é‡ã€‚</li>
<li><strong>å’Œæ˜¾å­˜å…³ç³»ï¼š</strong><br>
â†’ ä¸ç›´æ¥å†³å®šæ˜¾å­˜å ç”¨ï¼Œä½†é€šå¸¸ GFLOPs é«˜çš„æ¨¡å‹ä¹Ÿä¼šæœ‰æ›´å¤§ä¸­é—´ç‰¹å¾å›¾ï¼ˆfeature mapï¼‰ï¼Œå¯¼è‡´æ›´é«˜çš„æ˜¾å­˜å ç”¨ã€‚</li>
</ul>
<hr>
<h3 id="æ€»ç»“å’Œ-gpu-æ˜¾å­˜ç›¸å…³çš„éƒ¨åˆ†"><a class="markdownIt-Anchor" href="#æ€»ç»“å’Œ-gpu-æ˜¾å­˜ç›¸å…³çš„éƒ¨åˆ†"></a> ğŸ“Œ æ€»ç»“ï¼šå’Œ GPU æ˜¾å­˜ç›¸å…³çš„éƒ¨åˆ†</h3>
<table>
<thead>
<tr>
<th>ç»„ä»¶</th>
<th>è®­ç»ƒæ—¶æ˜¾å­˜å ç”¨</th>
<th>æ¨ç†æ—¶æ˜¾å­˜å ç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>parameters</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>gradients</td>
<td>æ˜¯ï¼ˆä¸»è¦æ˜¯è®­ç»ƒæ—¶ï¼‰</td>
<td>å¦</td>
</tr>
<tr>
<td>feature mapsï¼ˆä¸­é—´ç‰¹å¾å›¾ï¼Œæœªåœ¨ summary ä¸­åˆ—å‡ºï¼Œä½†ç”± layers ç»“æ„å’Œè¾“å…¥å¤§å°å†³å®šï¼‰</td>
<td>æ˜¯ï¼Œä¸»è¦å ç”¨</td>
<td>æ˜¯ï¼Œä¸»è¦å ç”¨</td>
</tr>
<tr>
<td>GFLOPs</td>
<td>é—´æ¥ç›¸å…³ï¼ˆé«˜ GFLOPs æ¨¡å‹é€šå¸¸ç‰¹å¾å›¾ä¹Ÿå¤§ï¼‰</td>
<td>é—´æ¥ç›¸å…³</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shakewely.github.io/2025/04/24/2025%E5%B9%B44%E6%9C%8824%E6%97%A5-%E8%AE%AD%E7%BB%83%E4%BC%98%E5%8C%96/" data-id="cmanj8o26000mlcv4fgg5hrf3" class="article-share-link">åˆ†äº«</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dl/" rel="tag">dl</a></li></ul>

    </footer>
  </div>
  
</article>




  
    <article id="post-2025å¹´4æœˆ19æ—¥-dockerè®°å½•" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/04/19/2025%E5%B9%B44%E6%9C%8819%E6%97%A5-docker%E8%AE%B0%E5%BD%95/" class="article-date">
  <time class="post-time" datetime="2025-04-19T01:41:50.000Z" itemprop="datePublished">
    <span class="post-month">4æœˆ</span><br/>
    <span class="post-day">19</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/04/19/2025%E5%B9%B44%E6%9C%8819%E6%97%A5-docker%E8%AE%B0%E5%BD%95/">2025å¹´4æœˆ19æ—¥ dockerè®°å½•</a>
    </h1>
  

        <div>
          
          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="docker"><a class="markdownIt-Anchor" href="#docker"></a> Docker</h1>
<h2 id="1-ä»‹ç»"><a class="markdownIt-Anchor" href="#1-ä»‹ç»"></a> 1 ä»‹ç»</h2>
<h3 id="11-dockerfile"><a class="markdownIt-Anchor" href="#11-dockerfile"></a> 1.1 dockerfile</h3>
<p>åŒ…å«äº†æ„å»º Docker é•œåƒçš„æ‰€æœ‰æŒ‡ä»¤</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker build -t opencv-detection5 .</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="12-compose"><a class="markdownIt-Anchor" href="#12-compose"></a> 1.2 compose</h3>
<p>ä» YML æ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d # 	åå°æ‰§è¡Œ</span><br></pre></td></tr></table></figure>
<h3 id="13-å‚æ•°"><a class="markdownIt-Anchor" href="#13-å‚æ•°"></a> 1.3 å‚æ•°</h3>
<ul>
<li>
<p>ä½¿ç”¨gpu</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --gpus all xx</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ç‰ˆæœ¬</p>
</li>
<li>
<p>å®¹å™¨é€€å‡ºåè‡ªåŠ¨åˆ é™¤ï¼Œä¸ä¿ç•™ä»»ä½•æ•°æ®æˆ–æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run  --rm xx</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="2-éƒ¨ç½²"><a class="markdownIt-Anchor" href="#2-éƒ¨ç½²"></a> 2 éƒ¨ç½²</h2>
<h3 id="21-éƒ¨ç½²æŠ¥é”™"><a class="markdownIt-Anchor" href="#21-éƒ¨ç½²æŠ¥é”™"></a> 2.1 éƒ¨ç½²æŠ¥é”™</h3>
<h4 id="1-å°è¯•ä½¿ç”¨pytorch-ä½†æ˜¯ä¸æ”¯æŒpython312"><a class="markdownIt-Anchor" href="#1-å°è¯•ä½¿ç”¨pytorch-ä½†æ˜¯ä¸æ”¯æŒpython312"></a> 1 å°è¯•ä½¿ç”¨pytorch ä½†æ˜¯ä¸æ”¯æŒpython312</h4>
<h4 id="2-å°è¯•ä½¿ç”¨åŸå§‹pythoncuda-ä½†æ˜¯cudaå®‰è£…è¶…æ—¶"><a class="markdownIt-Anchor" href="#2-å°è¯•ä½¿ç”¨åŸå§‹pythoncuda-ä½†æ˜¯cudaå®‰è£…è¶…æ—¶"></a> 2 å°è¯•ä½¿ç”¨åŸå§‹python+cuda ä½†æ˜¯cudaå®‰è£…è¶…æ—¶</h4>
<h4 id="3-å°è¯•ä½¿ç”¨pytorch-è‡ªå·±å†å®‰è£…python312-ä½†æ˜¯é‡åˆ°å¥½å¤šé—®é¢˜"><a class="markdownIt-Anchor" href="#3-å°è¯•ä½¿ç”¨pytorch-è‡ªå·±å†å®‰è£…python312-ä½†æ˜¯é‡åˆ°å¥½å¤šé—®é¢˜"></a> 3 å°è¯•ä½¿ç”¨pytorch è‡ªå·±å†å®‰è£…python312 ä½†æ˜¯é‡åˆ°å¥½å¤šé—®é¢˜ã€‚</h4>
<p>â€‹	å¤šäº†ä¸ªæ—¶åŒºé€‰æ‹©ï¼Œè¿è¡Œçš„é€‰æ‹©pythonç‰ˆæœ¬ï¼Œpython 3.12æ²¡æœ‰æ­£ç¡®å®‰è£…pipï¼Œåœ¨Ubuntu 22.04ä¸Šå®‰è£…Python 3.12æœ‰é—®é¢˜ç­‰ç­‰</p>
<h4 id="4-ä¿®æ”¹é¡¹ç›®ä»£ç -ä½¿ä¹‹æ”¯æŒpython311"><a class="markdownIt-Anchor" href="#4-ä¿®æ”¹é¡¹ç›®ä»£ç -ä½¿ä¹‹æ”¯æŒpython311"></a> 4 ä¿®æ”¹é¡¹ç›®ä»£ç  ä½¿ä¹‹æ”¯æŒpython311</h4>
<p>â€‹	æ”¹å†™override</p>
<h4 id="5-é¡¹ç›®ä»£ç å‡ºç°é—®é¢˜-linuxå¤§å°å†™æ•æ„Ÿ"><a class="markdownIt-Anchor" href="#5-é¡¹ç›®ä»£ç å‡ºç°é—®é¢˜-linuxå¤§å°å†™æ•æ„Ÿ"></a> 5 é¡¹ç›®ä»£ç å‡ºç°é—®é¢˜ linuxå¤§å°å†™æ•æ„Ÿ</h4>
<h4 id="6-æ¸…ç©ºç»™ç¼“å­˜-é¿å…å ç”¨ç©ºé—´"><a class="markdownIt-Anchor" href="#6-æ¸…ç©ºç»™ç¼“å­˜-é¿å…å ç”¨ç©ºé—´"></a> 6 æ¸…ç©ºç»™ç¼“å­˜ é¿å…å ç”¨ç©ºé—´</h4>
<p>â€‹	åˆ é™¤æœªä½¿ç”¨çš„å®¹å™¨ã€é•œåƒã€å·</p>
<p>â€‹	 æŸ¥çœ‹ Docker ç©ºé—´ä½¿ç”¨æƒ…å†µ</p>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ Docker å„éƒ¨åˆ†å ç”¨çš„ç©ºé—´ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker system df</span><br></pre></td></tr></table></figure>
<p>æ¸…ç† Docker é•œåƒç¼“å­˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker builder prune</span><br></pre></td></tr></table></figure>
<h3 id="22-å‘å¸ƒ-hub"><a class="markdownIt-Anchor" href="#22-å‘å¸ƒ-hub"></a> 2.2  å‘å¸ƒ hub</h3>
<h4 id="push"><a class="markdownIt-Anchor" href="#push"></a> push</h4>
<p>docker login</p>
<p>docker tag opencv-detection8.1:latest weakliy/opencv-detection-gaotie:latest<br>
docker push weakliy/opencv-detection-gaotie:latest</p>
<h4 id="pull"><a class="markdownIt-Anchor" href="#pull"></a> pull</h4>
<blockquote>
<p>å…¶ä»–æœºå™¨ä¸Š</p>
</blockquote>
<p>docker pull weakliy/opencv-detection-gaotie2:latest<br>
docker-compose up -d</p>
<h3 id="23-æ‰“åŒ…åˆ°æœ¬åœ°"><a class="markdownIt-Anchor" href="#23-æ‰“åŒ…åˆ°æœ¬åœ°"></a> 2.3 æ‰“åŒ…åˆ°æœ¬åœ°</h3>
<p>docker save -o detection.tar opencv-detection7.1:latest</p>
<p>docker load -i ./detection-gaotie.tar</p>
<p>docker-compose up</p>
<h2 id="3-ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#3-ä¼˜åŒ–"></a> 3 ä¼˜åŒ–</h2>
<h3 id="31-imageå±‚ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#31-imageå±‚ä¼˜åŒ–"></a> 3.1 imageå±‚ä¼˜åŒ–</h3>
<h4 id="1-å±‚ä¼˜åŒ–å‡å°‘ä¸å¿…è¦çš„å±‚å‘½ä»¤å’Œå¹¶"><a class="markdownIt-Anchor" href="#1-å±‚ä¼˜åŒ–å‡å°‘ä¸å¿…è¦çš„å±‚å‘½ä»¤å’Œå¹¶"></a> 1 å±‚ä¼˜åŒ–å‡å°‘ä¸å¿…è¦çš„å±‚+å‘½ä»¤å’Œå¹¶</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># ä¸æ¨èï¼šæ¯ä¸ªå‘½ä»¤éƒ½ä¼šåˆ›å»ºæ–°å±‚</span><br><span class="line">RUN apt-get update</span><br><span class="line">RUN apt-get install -y python3</span><br><span class="line">RUN pip install numpy</span><br><span class="line">RUN pip install opencv-python</span><br><span class="line"></span><br><span class="line"># æ¨èï¼šåˆå¹¶RUNå‘½ä»¤</span><br><span class="line">RUN apt-get update &amp;&amp; \</span><br><span class="line">    apt-get install -y python3 &amp;&amp; \</span><br><span class="line">    pip install numpy opencv-python &amp;&amp; \</span><br><span class="line">    apt-get clean &amp;&amp; \</span><br><span class="line">    rm -rf /var/lib/apt/lists/*</span><br></pre></td></tr></table></figure>
<h4 id="2-dockerignoreæ–‡ä»¶"><a class="markdownIt-Anchor" href="#2-dockerignoreæ–‡ä»¶"></a> 2 .dockerignoreæ–‡ä»¶</h4>
<h4 id="3-åŠæ—¶æ¸…ç†"><a class="markdownIt-Anchor" href="#3-åŠæ—¶æ¸…ç†"></a> 3 åŠæ—¶æ¸…ç†</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id><a class="markdownIt-Anchor" href="#"></a> </h4>
<h4 id="4-ä¼˜åŒ–copyå‘½ä»¤-å…ˆå¤åˆ¶ä¾èµ–æ–‡ä»¶å®‰è£…ä¾èµ–å†å¤åˆ¶ä»£ç "><a class="markdownIt-Anchor" href="#4-ä¼˜åŒ–copyå‘½ä»¤-å…ˆå¤åˆ¶ä¾èµ–æ–‡ä»¶å®‰è£…ä¾èµ–å†å¤åˆ¶ä»£ç "></a> 4 ä¼˜åŒ–COPYå‘½ä»¤+ å…ˆå¤åˆ¶ä¾èµ–æ–‡ä»¶ï¼Œå®‰è£…ä¾èµ–ï¼Œå†å¤åˆ¶ä»£ç </h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># æ¨èï¼šå…ˆå¤åˆ¶ä¾èµ–æ–‡ä»¶ï¼Œå®‰è£…ä¾èµ–ï¼Œå†å¤åˆ¶ä»£ç </span><br><span class="line">COPY requirements.txt .</span><br><span class="line">RUN pip install -r requirements.txt</span><br><span class="line">COPY . .</span><br></pre></td></tr></table></figure>
<h4 id="5-ä¸¤é˜¶æ®µæ„å»º"><a class="markdownIt-Anchor" href="#5-ä¸¤é˜¶æ®µæ„å»º"></a> 5 ä¸¤é˜¶æ®µæ„å»º</h4>
<ol>
<li>å…ˆæ„å»ºç¯å¢ƒ+å·¥å…·</li>
<li>åªcopyç¯å¢ƒ</li>
</ol>
<h3 id="32-æ ‡ç­¾ç®¡ç†"><a class="markdownIt-Anchor" href="#32-æ ‡ç­¾ç®¡ç†"></a> 3.2 æ ‡ç­¾ç®¡ç†</h3>
<p># æ–¹æ³•1ï¼šä½¿ç”¨â€“build-argå‚æ•°</p>
<p>docker build --build-arg VERSION=1.0.0 -t opencv-detection .</p>
<p>docker build --build-arg VERSION=1.1.0 -t opencv-detection .</p>
<h3 id="dockeréƒ½ä¼‘çœ äº†-pipè¿˜åœ¨å®‰è£…å‘¢-æ²¡å†…å­˜äº†"><a class="markdownIt-Anchor" href="#dockeréƒ½ä¼‘çœ äº†-pipè¿˜åœ¨å®‰è£…å‘¢-æ²¡å†…å­˜äº†"></a> <strong>dockeréƒ½ä¼‘çœ äº† pipè¿˜åœ¨å®‰è£…å‘¢ã€‚ã€‚ã€‚ã€‚â€”â€”æ²¡å†…å­˜äº†</strong></h3>
<h2 id="4-æŠ¥é”™"><a class="markdownIt-Anchor" href="#4-æŠ¥é”™"></a> 4 æŠ¥é”™</h2>
<p>docker export å’Œload</p>
<p>open /var/lib/docker/tmp/docker-import-929897693/blobs/json: no such file or directory</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shakewely.github.io/2025/04/19/2025%E5%B9%B44%E6%9C%8819%E6%97%A5-docker%E8%AE%B0%E5%BD%95/" data-id="cmanj8o25000klcv45461flou" class="article-share-link">åˆ†äº«</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9D%82/" rel="tag">æ‚</a></li></ul>

    </footer>
  </div>
  
</article>




  
    <article id="post-2025å¹´4æœˆ4æ—¥-triton" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/04/02/2025%E5%B9%B44%E6%9C%884%E6%97%A5-triton/" class="article-date">
  <time class="post-time" datetime="2025-04-02T13:45:53.000Z" itemprop="datePublished">
    <span class="post-month">4æœˆ</span><br/>
    <span class="post-day">02</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/04/02/2025%E5%B9%B44%E6%9C%884%E6%97%A5-triton/">2025å¹´4æœˆ4æ—¥ triton</a>
    </h1>
  

        <div>
          
          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/684473453">https://zhuanlan.zhihu.com/p/684473453</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/703256080">https://zhuanlan.zhihu.com/p/703256080</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shakewely.github.io/2025/04/02/2025%E5%B9%B44%E6%9C%884%E6%97%A5-triton/" data-id="cmanj8o26000nlcv4hdsi2bjg" class="article-share-link">åˆ†äº«</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dl%E3%80%81infer/" rel="tag">dlã€infer</a></li></ul>

    </footer>
  </div>
  
</article>




  
    <article id="post-ç®—æ³•è®¾è®¡" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/03/31/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/" class="article-date">
  <time class="post-time" datetime="2025-03-31T13:50:35.913Z" itemprop="datePublished">
    <span class="post-month">3æœˆ</span><br/>
    <span class="post-day">31</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="åŠ¨æ€è§„åˆ’"><a class="markdownIt-Anchor" href="#åŠ¨æ€è§„åˆ’"></a> åŠ¨æ€è§„åˆ’</h2>
<ul>
<li>æš´åŠ›ç©·ä¸¾
<ul>
<li>è®°å½•é¿å…é‡å¤</li>
<li>
<img src="/2025/03/31/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/image-20250331215153891.png" alt="image-20250331215153891" style="zoom:33%;">
</li>
</ul>
</li>
<li>æ–¹å‘è¿›è¡Œ
<ul>
<li>
<img src="/2025/03/31/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/image-20250331215203800.png" alt="image-20250331215203800" style="zoom:33%;">
</li>
</ul>
</li>
</ul>
<h2 id="åˆ†å­æ³•"><a class="markdownIt-Anchor" href="#åˆ†å­æ³•"></a> åˆ†å­æ³•</h2>
<img src="/2025/03/31/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/image-20250331215909614.png" alt="image-20250331215909614" style="zoom:50%;">
<ul>
<li>åˆ† äºŒåˆ†</li>
<li>æ²» é€’å½’</li>
<li>å¤„ç† å­é—®é¢˜åˆå¹¶</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shakewely.github.io/2025/03/31/%E7%AE%97%E6%B3%95%E8%AE%BE%E8%AE%A1/" data-id="cmc9s779y00022ov4bcfddpu2" class="article-share-link">åˆ†äº«</a>
      
      
    </footer>
  </div>
  
</article>




  
    <article id="post-2025å¹´4æœˆ16æ—¥-TensorRT2exportæ±‡æ€»" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/03/16/2025%E5%B9%B44%E6%9C%8816%E6%97%A5-TensorRT2export%E6%B1%87%E6%80%BB/" class="article-date">
  <time class="post-time" datetime="2025-03-16T09:30:04.000Z" itemprop="datePublished">
    <span class="post-month">3æœˆ</span><br/>
    <span class="post-day">16</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/03/16/2025%E5%B9%B44%E6%9C%8816%E6%97%A5-TensorRT2export%E6%B1%87%E6%80%BB/">2023å¹´11æœˆ16æ—¥ TensorRTæ¨ç†æ±‡æ€»</a>
    </h1>
  

        <div>
          
          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>å»</p>
<h3 id><a class="markdownIt-Anchor" href="#"></a> </h3>
<h1 id="æµç¨‹"><a class="markdownIt-Anchor" href="#æµç¨‹"></a> æµç¨‹</h1>
<p><strong>â€œONNX â†’ TensorRT Engine â†’ åŠ è½½å¼•æ“æ–‡ä»¶å¹¶ååºåˆ—åŒ–ä¸ºå¯æ‰§è¡Œæ¨¡å‹ â†’ åˆ†é…è¾“å…¥è¾“å‡º â†’ æ¨ç†æ‰§è¡Œ â†’ æ‹·å‡ºç»“æœ â†’ åå¤„ç†â€</strong></p>
<blockquote>
<ol>
<li>ï¼Ÿååºåˆ—åŒ–ä¸ºå¯æ‰§è¡Œæ¨¡å‹</li>
<li>ï¼Ÿï¼Ÿ åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆIExecutionContextï¼‰</li>
</ol>
</blockquote>
<h2 id="1-exe-å¯¼å‡º"><a class="markdownIt-Anchor" href="#1-exe-å¯¼å‡º"></a> 1 Exe å¯¼å‡º</h2>
<p><strong>åŠ ä¸Š <code>--verbose</code></strong> è¿è¡Œ <code>trtexec</code></p>
<p>æ¨¡å‹æ±‡æ€»</p>
<table>
<thead>
<tr>
<th>æ ¼å¼</th>
<th>æ–‡ä»¶æ‰©å±•å</th>
<th>å†…å®¹</th>
<th>ç”¨é€”</th>
<th>ç”Ÿæˆæ–¹å¼</th>
<th>å¯ç›´æ¥æ¨ç†ï¼Ÿ</th>
</tr>
</thead>
<tbody>
<tr>
<td>WTS</td>
<td><code>.wts</code></td>
<td>ç½‘ç»œç»“æ„å„å±‚çš„æƒé‡ï¼ˆæ–‡æœ¬æˆ–äºŒè¿›åˆ¶ï¼‰</td>
<td>é€šå¸¸ç”¨äºä» PyTorch åˆ° TensorRT çš„è‡ªå®šä¹‰è½¬æ¢æµç¨‹ï¼Œå¦‚é€šè¿‡ C++ çš„ API åŠ è½½</td>
<td>é€šå¸¸é€šè¿‡ PyTorch è„šæœ¬å¯¼å‡º</td>
<td>âŒ</td>
</tr>
<tr>
<td>TRT Engine</td>
<td><code>.trt</code> / <code>.engine</code></td>
<td>å·²ä¼˜åŒ–çš„æ¨ç†å¼•æ“ï¼ˆå«ç½‘ç»œç»“æ„ + æƒé‡ + TensorRT ä¼˜åŒ–ï¼‰</td>
<td>TensorRT çš„æœ€ç»ˆéƒ¨ç½²æ ¼å¼</td>
<td>ä½¿ç”¨ <code>trtexec</code> æˆ– TensorRT API ç¼–è¯‘ <code>.onnx</code> æˆ– <code>.wts</code> æ¨¡å‹ç”Ÿæˆ</td>
<td>âœ…</td>
</tr>
</tbody>
</table>
<h1 id="é—®é¢˜æ±‡æ€»"><a class="markdownIt-Anchor" href="#é—®é¢˜æ±‡æ€»"></a> é—®é¢˜æ±‡æ€»</h1>
<h3 id="ï¸-è‡ªå®šä¹‰å±‚é—®é¢˜"><a class="markdownIt-Anchor" href="#ï¸-è‡ªå®šä¹‰å±‚é—®é¢˜"></a> âš ï¸ è‡ªå®šä¹‰å±‚é—®é¢˜</h3>
<h4 id="1-eyelikeåŠ¨æ€å½¢çŠ¶"><a class="markdownIt-Anchor" href="#1-eyelikeåŠ¨æ€å½¢çŠ¶"></a> 1 EyeLikeåŠ¨æ€å½¢çŠ¶</h4>
<p><code>EyeLike</code> æ˜¯ ONNX ä¸­ä¸€ä¸ªç”¨äºç”Ÿæˆå•ä½çŸ©é˜µçš„æ“ä½œã€‚è¯¥é”™è¯¯è¯´æ˜ï¼š</p>
<ul>
<li>ä½ æ¨¡å‹ä¸­çš„æŸä¸ªèŠ‚ç‚¹ä½¿ç”¨äº† <code>EyeLike</code> æ“ä½œï¼›</li>
<li>ä½†è¿™ä¸ªæ“ä½œçš„è¾“å…¥å¼ é‡æ˜¯åŠ¨æ€ç»´åº¦ï¼ˆå³ç»´åº¦åœ¨æ¨ç†æ—¶ä¸å›ºå®šï¼‰ï¼›</li>
<li>è€Œ TensorRT <strong>ä¸æ”¯æŒå¯¹åŠ¨æ€ç»´åº¦ä½¿ç”¨ EyeLike</strong>ã€‚</li>
</ul>
<p><strong>EyeLike æ“ä½œ</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰å±‚æˆ–ç‰¹æ®Šå±‚ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒTensorRT ä¸æ”¯æŒåŠ¨æ€å½¢çŠ¶ã€‚</p>
<p><strong>åŠ¨æ€å½¢çŠ¶é—®é¢˜</strong>ï¼šTensorRT ä¸æ”¯æŒåŠ¨æ€å½¢çŠ¶çš„è¾“å…¥ï¼ˆ<code>EyeLike</code> æ“ä½œçš„è¾“å…¥æ˜¯åŠ¨æ€å½¢çŠ¶ï¼‰ï¼Œè¿™å¯¼è‡´äº†é”™è¯¯ã€‚</p>
<blockquote>
<p>ä½¿ç”¨batch å¤§å°ä¸éœ€è¦å˜åŒ–çš„minShapesæ—¶æ²¡ç”¨çš„ï¼</p>
</blockquote>
<h3 id="ï¸-åŠ¨æ€è¾“å…¥å°ºå¯¸é—®é¢˜"><a class="markdownIt-Anchor" href="#ï¸-åŠ¨æ€è¾“å…¥å°ºå¯¸é—®é¢˜"></a> âš ï¸ åŠ¨æ€è¾“å…¥å°ºå¯¸é—®é¢˜ï¼š</h3>
<h4 id="1-onnxå‚æ•°dynamictrue"><a class="markdownIt-Anchor" href="#1-onnxå‚æ•°dynamictrue"></a> 1 ONNXå‚æ•°dynamic=True</h4>
<p>ä½ å¯¼å‡ºçš„ ONNX æ¨¡å‹ä½¿ç”¨äº† <strong>åŠ¨æ€è¾“å…¥å°ºå¯¸</strong>ï¼ˆ<code>dynamic=True</code>ï¼‰ï¼Œå¯¼è‡´ <code>trtexec</code> åœ¨æ„å»º TensorRT å¼•æ“æ—¶éœ€è¦ä½ <strong>æ˜ç¡®åœ°æŒ‡å®šè¾“å…¥å°ºå¯¸ profile</strong>ï¼Œå¦åˆ™å°±ä¼šæŠ¥é”™ã€‚</p>
<p>è§£å†³ï¼š</p>
<blockquote>
<p>trtexec <br>
â€“onnx=best_dynamic.onnx <br>
â€“saveEngine=best.engine <br>
â€“fp16 <br>
â€“minShapes=images:1x3x640x640 <br>
â€“optShapes=images:8x3x640x640 <br>
â€“maxShapes=images:16x3x640x640</p>
</blockquote>
<h3 id="ï¸-é‡åŒ–é—®é¢˜"><a class="markdownIt-Anchor" href="#ï¸-é‡åŒ–é—®é¢˜"></a> âš ï¸  é‡åŒ–é—®é¢˜</h3>
<h4 id="1-int64æ•°æ®"><a class="markdownIt-Anchor" href="#1-int64æ•°æ®"></a> 1 INT64æ•°æ®</h4>
<p>ä½ çš„ ONNX æ¨¡å‹ä¸­åŒ…å«äº†ä¸€äº› <strong><code>INT64</code> ç±»å‹çš„æƒé‡æˆ–å¸¸é‡</strong>ï¼Œè€Œ TensorRT <strong>åŸç”Ÿåªæ”¯æŒ <code>INT32</code> åŠä»¥ä¸‹çš„æ•´æ•°ç±»å‹</strong>ï¼Œå› æ­¤å®ƒå°è¯•<strong>è‡ªåŠ¨å°† <code>INT64</code> è½¬æ¢ä¸º <code>INT32</code></strong>ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onnx2trt_utils.cpp:374: Your ONNX model has been generated with INT64 weights, while TensorRT does not natively support INT64. Attempting to cast down to INT32.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="ï¸é”™è¯¯"><a class="markdownIt-Anchor" href="#ï¸é”™è¯¯"></a> âš ï¸é”™è¯¯</h3>
<p>[05/13/2025-15:25:59] [TRT] [E] 1: [defaultAllocator.cpp::nvinfer1::internal::DefaultAllocator::deallocate::61] Error Code 1: Cuda Runtime (invalid argument)</p>
<h1 id="success"><a class="markdownIt-Anchor" href="#success"></a> successï¼</h1>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">trtexec --onnx=F:\Pydata\DL_NEW\fuxian\ultralytics\runs\detect\wire-Ghost-C3ghost-GSCSP-CBAM3\weights\best_simplify_dynamic=False.onnx --saveEngine=best_int8.trt --int8 --verbose  --minShapes=images:1x3x640x640 --optShapes=images:8x3x640x640 --maxShapes=images:16x3x640x640trtexec ^</span><br><span class="line">--onnx=F:\Pydata\DL_NEW\fuxian\ultralytics\runs\detect\wire-Ghost-C3ghost-GSCSP-CBAM3\weights\best_simplify_dynamic.onnx ^</span><br><span class="line">--saveEngine=best_int8.trt ^</span><br><span class="line">--int8 ^</span><br><span class="line">--verbose ^</span><br><span class="line">--minShapes=images:1x3x640x640 ^</span><br><span class="line">--optShapes=images:8x3x640x640 ^</span><br><span class="line">--maxShapes=images:16x3x640x640</span><br></pre></td></tr></table></figure>
<p><img src="/2025/03/16/2025%E5%B9%B44%E6%9C%8816%E6%97%A5-TensorRT2export%E6%B1%87%E6%80%BB/C:%5CUsers%5Cadmin%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20250513135551397.png" alt="image-20250513135551397"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shakewely.github.io/2025/03/16/2025%E5%B9%B44%E6%9C%8816%E6%97%A5-TensorRT2export%E6%B1%87%E6%80%BB/" data-id="cmanj8o27000plcv44xiw84f2" class="article-share-link">åˆ†äº«</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TensorRT/" rel="tag">TensorRT</a></li></ul>

    </footer>
  </div>
  
</article>




  
    <article id="post-2025å¹´3æœˆ16æ—¥-DLå…«è‚¡æ–‡" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2025/03/14/2025%E5%B9%B43%E6%9C%8816%E6%97%A5-DL%E5%85%AB%E8%82%A1%E6%96%87/" class="article-date">
  <time class="post-time" datetime="2025-03-14T06:44:16.000Z" itemprop="datePublished">
    <span class="post-month">3æœˆ</span><br/>
    <span class="post-day">14</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2025/03/14/2025%E5%B9%B43%E6%9C%8816%E6%97%A5-DL%E5%85%AB%E8%82%A1%E6%96%87/">2025å¹´3æœˆ16æ—¥ DLå…«è‚¡æ–‡</a>
    </h1>
  

        <div>
          
          
              

          
        </div>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>è®°å½•ä¸€äº›å­¦äº†åˆå¿˜æˆ–æ˜¯æ²¡å­¦çš„DLå…«è‚¡æ–‡çŸ¥è¯†</p>
</blockquote>
<h1 id="dlå…«è‚¡æ–‡"><a class="markdownIt-Anchor" href="#dlå…«è‚¡æ–‡"></a> DLå…«è‚¡æ–‡</h1>
<h1 id="åŸç†"><a class="markdownIt-Anchor" href="#åŸç†"></a> åŸç†</h1>
<p>ä¸€ç§åŸºäºæ·±å±‚ç¥ç»ç½‘ç»œçš„æœºå™¨å­¦ä¹ æ–¹æ³•ï¼Œé€šè¿‡å¤šå±‚æ¬¡çš„éçº¿æ€§å˜æ¢è‡ªåŠ¨æå–æ•°æ®ç‰¹å¾ï¼Œå®ç°å¤æ‚æ¨¡å¼çš„è¯†åˆ«ä¸é¢„æµ‹ã€‚æ ¸å¿ƒæ˜¯æ¨¡ä»¿äººè„‘ç¥ç»å…ƒçš„è¿æ¥æ–¹å¼ï¼Œæ„å»ºâ€œè¾“å…¥-éšè—-è¾“å‡ºâ€å±‚çº§çš„è®¡ç®—æ¨¡å‹ï¼Œä»æ•°æ®ä¸­å­¦ä¹ ä»ç®€å•åˆ°æŠ½è±¡çš„ç‰¹å¾è¡¨ç¤º</p>
<h1 id="è®­ç»ƒ"><a class="markdownIt-Anchor" href="#è®­ç»ƒ"></a> è®­ç»ƒ</h1>
<blockquote>
<p>æ¨¡å‹è®­ç»ƒçš„æ ¸å¿ƒæ˜¯é€šè¿‡è°ƒæ•´å‚æ•°ï¼ˆå¦‚æƒé‡ <em>w</em> å’Œåç½® <em>b</em>ï¼‰ æœ€å°åŒ–æŸå¤±å‡½æ•° L</p>
</blockquote>
<h2 id="è¿‡æ‹Ÿåˆ"><a class="markdownIt-Anchor" href="#è¿‡æ‹Ÿåˆ"></a> è¿‡æ‹Ÿåˆ</h2>
<h3 id="1-ä»€ä¹ˆæ˜¯è¿‡æ‹Ÿåˆ"><a class="markdownIt-Anchor" href="#1-ä»€ä¹ˆæ˜¯è¿‡æ‹Ÿåˆ"></a> 1 ä»€ä¹ˆæ˜¯è¿‡æ‹Ÿåˆ</h3>
<p>æŒ‡æ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°ä¼˜å¼‚ï¼Œä½†åœ¨æµ‹è¯•é›†æˆ–æ–°æ•°æ®ä¸Šæ³›åŒ–èƒ½åŠ›æ˜¾è‘—ä¸‹é™çš„ç°è±¡ã€‚å…¶æ ¸å¿ƒçŸ›ç›¾æ˜¯æ¨¡å‹è¿‡åº¦<strong>å­¦ä¹ äº†è®­ç»ƒæ•°æ®ä¸­çš„å™ªå£°å’Œéå…¨å±€æ€§ç‰¹å¾</strong>ï¼Œè€Œéæ•°æ®èƒŒåçš„çœŸå®è§„å¾‹ ã€‚</p>
<h3 id="2-åŸå› "><a class="markdownIt-Anchor" href="#2-åŸå› "></a> 2 åŸå› </h3>
<ol>
<li>æ•°æ®å±‚é¢ï¼š<strong>æ•°æ®é‡ä¸è¶³</strong>ï¼Œå¯¼è‡´æ²¡æœ‰å­¦åˆ°å…¨å±€ç‰¹å¾ã€‚<strong>å™ªå£°å¹²æ‰°</strong>ï¼Œæ•°æ®ä¸­å­˜åœ¨å¼‚å¸¸å€¼æˆ–é”™è¯¯æ ‡ç­¾ï¼Œæ¨¡å‹è¯¯å°†å…¶ä½œä¸ºå­¦ä¹ ç›®æ ‡</li>
<li>æ¨¡å‹å±‚é¢ï¼šæ¨¡å‹è¿‡äºå¤æ‚ï¼Œ<strong>è¿‡åº¦é€‚åº”è®­ç»ƒæ•°æ®ç»†èŠ‚</strong></li>
<li>è®­ç»ƒå±‚é¢ï¼šè¿­ä»£æ¬¡æ•°è¿‡å¤šï¼ˆæœªæ—©åœï¼‰æˆ–å­¦ä¹ ç‡æœªä¼˜åŒ–/</li>
</ol>
<h3 id="3-å¦‚ä½•è§£å†³"><a class="markdownIt-Anchor" href="#3-å¦‚ä½•è§£å†³"></a> 3 å¦‚ä½•è§£å†³</h3>
<ol>
<li>
<p>ï¼šæ•°æ®å¢å¼ºä¸æ•°æ®æ¸…æ´—</p>
</li>
<li>
<p>ï¼šé€‰ç”¨ç®€å•æ¨¡å‹ã€‚æ·»åŠ æ­£åˆ™åŒ–ç­–ç•¥ï¼Œ<strong>Dropout</strong>ã€<strong>æ‰¹é‡å½’ä¸€åŒ–</strong>BatchNormã€<strong>æ± åŒ–</strong></p>
</li>
<li>
<p>ï¼šæ—©åœæ³•ã€åŠ¨æ€å­¦ä¹ ç‡ã€</p>
</li>
<li>
<p><strong>é›†æˆæ–¹æ³•</strong>ï¼šç»“åˆå¤šä¸ªæ¨¡å‹çš„é¢„æµ‹ç»“æœï¼ˆå¦‚éšæœºæ£®æ—æŠ•ç¥¨ï¼‰ï¼Œå‡å°‘å•ä¸ªæ¨¡å‹æ–¹å·®</p>
<p><strong>è¿ç§»å­¦ä¹ ç­‰</strong></p>
</li>
</ol>
<h3 id="4-æ¬ æ‹Ÿåˆå‘¢"><a class="markdownIt-Anchor" href="#4-æ¬ æ‹Ÿåˆå‘¢"></a> 4 æ¬ æ‹Ÿåˆå‘¢ï¼Ÿ</h3>
<h2 id="è®­ç»ƒæ–¹æ³•"><a class="markdownIt-Anchor" href="#è®­ç»ƒæ–¹æ³•"></a> è®­ç»ƒæ–¹æ³•</h2>
<p>è®­ç»ƒæ–¹æ³•</p>
<h3 id="1-ç›‘ç£å­¦ä¹ "><a class="markdownIt-Anchor" href="#1-ç›‘ç£å­¦ä¹ "></a> 1 ç›‘ç£å­¦ä¹ </h3>
<h3 id="3-è‡ªç›‘ç£å­¦ä¹ "><a class="markdownIt-Anchor" href="#3-è‡ªç›‘ç£å­¦ä¹ "></a> 3 è‡ªç›‘ç£å­¦ä¹ </h3>
<blockquote>
<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://developer.aliyun.com/article/1257862?spm=a2c6h.24874632.expert-profile.15.45a63181v37e02%5C">https://developer.aliyun.com/article/1257862?spm=a2c6h.24874632.expert-profile.15.45a63181v37e02\</a></p>
</blockquote>
<h4 id="å®šä¹‰"><a class="markdownIt-Anchor" href="#å®šä¹‰"></a> å®šä¹‰</h4>
<p>â€‹	å®ƒåˆ©ç”¨æœªæ ‡è®°çš„æ•°æ®æ¥è®­ç»ƒæ¨¡å‹ï¼Œè€Œæ— éœ€äººå·¥æ ‡æ³¨çš„æ ‡ç­¾</p>
<p>â€‹	åˆ©ç”¨æ•°æ®ä¸­çš„è‡ªåŠ¨ç”Ÿæˆçš„æ ‡ç­¾æˆ–ä»»åŠ¡æ¥è®­ç»ƒæ¨¡å‹</p>
<h4 id="è‡ªç›‘ç£å­¦ä¹ æ–¹æ³•"><a class="markdownIt-Anchor" href="#è‡ªç›‘ç£å­¦ä¹ æ–¹æ³•"></a> è‡ªç›‘ç£å­¦ä¹ æ–¹æ³•</h4>
<h3 id="4-zero-shot-one-shot-and-few-shot-learningæ¦‚å¿µ"><a class="markdownIt-Anchor" href="#4-zero-shot-one-shot-and-few-shot-learningæ¦‚å¿µ"></a> 4 Zero-Shot, One-Shot, and Few-Shot Learningæ¦‚å¿µ</h3>
<ol>
<li>Zero-Shotæ˜¯æŒ‡è®­ç»ƒä¸€ä¸ªæ¨¡å‹æ¥å¯¹å…¶ä»æœªè§è¿‡çš„å¯¹è±¡è¿›è¡Œåˆ†ç±»ã€‚å…¶æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨å¦ä¸€ä¸ªæ¨¡å‹çš„ç°æœ‰çŸ¥è¯†ï¼Œä»¥è·å¾—æ–°ç±»åˆ«çš„æœ‰æ„ä¹‰çš„è¡¨ç¤ºã€‚</li>
<li>One-Shotæ˜¯ç¡®å®šå›¾åƒAæ˜¯å¦ç­‰åŒäºå›¾åƒBã€‚è¿™æ˜¯é€šè¿‡å°†æ¨¡å‹ä»å…ˆå‰ä»»åŠ¡çš„ç»éªŒä¸­è·å¾—çš„ä¿¡æ¯è¿›è¡Œæ¦‚æ‹¬æ¥å®ç°çš„ã€‚</li>
<li>Few-Shot Learningå®ƒæ˜¯å…ƒå­¦ä¹ çš„ä¸€ä¸ªå­é¢†åŸŸï¼Œæ—¨åœ¨å¼€å‘èƒ½å¤Ÿä»å°‘é‡æœ‰æ ‡ç­¾ç¤ºä¾‹ä¸­å­¦ä¹ çš„ç®—æ³•</li>
</ol>
<h2 id="è¿ç§»å­¦ä¹ å¾®è°ƒ-ï¸"><a class="markdownIt-Anchor" href="#è¿ç§»å­¦ä¹ å¾®è°ƒ-ï¸"></a> è¿ç§»å­¦ä¹ +å¾®è°ƒ â˜‘ï¸</h2>
<h3 id="1-è¿ç§»å­¦ä¹ "><a class="markdownIt-Anchor" href="#1-è¿ç§»å­¦ä¹ "></a> 1 è¿ç§»å­¦ä¹ </h3>
<p>åœ¨å¤§å‹æ•°æ®é›†ä¸Šè®­ç»ƒå¥½çš„æ¨¡å‹å¯ä»¥è¢«â€œè¿ç§»â€åˆ°æ–°çš„ä»»åŠ¡ä¸­ï¼Œä»è€Œé¿å…ä»é›¶å¼€å§‹è®­ç»ƒã€‚å¤§åœ°ç¼©çŸ­è®­ç»ƒæ—¶é—´ï¼Œå¹¶æ˜¾è‘—æé«˜æ€§èƒ½</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŠ è½½é¢„è®­ç»ƒçš„ResNetæ¨¡å‹</span></span><br><span class="line">resnet = models.resnet50(pretrained=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure>
<h3 id="2-å¾®è°ƒ"><a class="markdownIt-Anchor" href="#2-å¾®è°ƒ"></a> 2 å¾®è°ƒ</h3>
<ul>
<li>é€šè¿‡å¯¹é¢„è®­ç»ƒæ¨¡å‹<strong>è¿›è¡Œéƒ¨åˆ†æˆ–å…¨éƒ¨å‚æ•°çš„å¾®è°ƒ</strong>ï¼Œæ¨¡å‹å¯ä»¥é€‚åº”æ–°ä»»åŠ¡ä¸­çš„ç‰¹å®šæ•°æ®ã€‚å¾®è°ƒçš„ç¨‹åº¦å–å†³äºæ–°ä»»åŠ¡çš„ç›¸ä¼¼æ€§å’Œç›®æ ‡ã€‚</li>
<li>é€šå¸¸ä¼šå†»ç»“æ¨¡å‹çš„éƒ¨åˆ†å±‚ï¼Œä»¥ä¿ç•™é€šç”¨çš„ç‰¹å¾æå–èƒ½åŠ›ï¼Œé’ˆå¯¹æ–°ä»»åŠ¡<strong>åªå¯¹é«˜å±‚</strong>è¿›è¡Œå¾®è°ƒã€‚</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†»ç»“æ‰€æœ‰å±‚çš„å‚æ•°ï¼Œä»¥ä¾¿åªå¾®è°ƒæœ€åçš„å…¨è¿æ¥å±‚</span></span><br><span class="line"><span class="keyword">for</span> param <span class="keyword">in</span> resnet.parameters():</span><br><span class="line">    param.requires_grad = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å†»éƒ¨åˆ†å±‚ï¼Œå…è®¸æ›´å¤šå±‚è¿›è¡Œè®­ç»ƒ</span></span><br><span class="line"><span class="keyword">for</span> name, param <span class="keyword">in</span> resnet.named_parameters():</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;layer4&quot;</span> <span class="keyword">in</span> name:  <span class="comment"># å‡è®¾åªè§£å†»ResNetçš„æœ€åä¸€å±‚</span></span><br><span class="line">        param.requires_grad = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        param.requires_grad = <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<h2 id="æ¢¯åº¦"><a class="markdownIt-Anchor" href="#æ¢¯åº¦"></a> æ¢¯åº¦</h2>
<p><img src="/2025/03/14/2025%E5%B9%B43%E6%9C%8816%E6%97%A5-DL%E5%85%AB%E8%82%A1%E6%96%87/image-20250320184024743.png" alt></p>
<h3 id="2-æ¢¯åº¦ç¨€ç–åŒ–é—®é¢˜"><a class="markdownIt-Anchor" href="#2-æ¢¯åº¦ç¨€ç–åŒ–é—®é¢˜"></a> 2 æ¢¯åº¦ç¨€ç–åŒ–é—®é¢˜</h3>
<h4 id="å®šä¹‰-2"><a class="markdownIt-Anchor" href="#å®šä¹‰-2"></a> å®šä¹‰</h4>
<p>åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œæ¢¯åº¦æ˜¯æŒ‡æŸå¤±å‡½æ•°å¯¹æ¨¡å‹å‚æ•°çš„åå¯¼æ•°ã€‚é€šè¿‡åå‘ä¼ æ’­ç®—æ³•ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å¾—åˆ°æ¯ä¸ªå‚æ•°çš„æ¢¯åº¦ï¼Œå¹¶ä½¿ç”¨ä¼˜åŒ–ç®—æ³•ï¼ˆå¦‚éšæœºæ¢¯åº¦ä¸‹é™ï¼‰æ¥æ›´æ–°å‚æ•°ã€‚ç„¶è€Œï¼Œåœ¨æ·±å±‚ç¥ç»ç½‘ç»œä¸­ï¼Œæ¢¯åº¦é€šå¸¸å…·æœ‰å¾ˆé«˜çš„ç»´åº¦ï¼Œ<strong>å…¶ä¸­å¤§éƒ¨åˆ†å…ƒç´ éƒ½æ˜¯æ¥è¿‘äºé›¶æˆ–è€…éå¸¸å°çš„å€¼</strong>ã€‚è¿™äº›æ¥è¿‘äºé›¶çš„æ¢¯åº¦å…ƒç´ å¯¹å‚æ•°æ›´æ–°å‡ ä¹æ²¡æœ‰è´¡çŒ®ï¼Œå¹¶ä¸”ä¼šå ç”¨å¤§é‡å†…å­˜ç©ºé—´å’Œè®¡ç®—èµ„æºã€‚</p>
<ul>
<li>
<p>æ¨¡å‹æ›´æ–°åå·®ï¼šä»…éƒ¨åˆ†å‚æ•°è¢«æœ‰æ•ˆæ›´æ–°ï¼Œå¯èƒ½åç¦»å…¨å±€æœ€ä¼˜è§£</p>
</li>
<li>
<p>è®­ç»ƒä¸ç¨³å®šï¼šæ¢¯åº¦åˆ†å¸ƒä¸å‡åŠ å‰§æ”¶æ•›éœ‡è¡</p>
</li>
</ul>
<h4 id="æˆå› "><a class="markdownIt-Anchor" href="#æˆå› "></a> <strong>æˆå› </strong></h4>
<ol>
<li><strong>æ¨¡å‹ç»“æ„ä¸æ¿€æ´»å‡½æ•°</strong>
<ul>
<li>å±€éƒ¨æ¿€æ´»ç¨€ç–æ€§ï¼šReLUç­‰æ¿€æ´»å‡½æ•°åœ¨è¾“å…¥ä¸ºè´Ÿæ—¶è¾“å‡ºé›¶æ¢¯åº¦ï¼Œå¯¼è‡´å¤§é‡ç¥ç»å…ƒå¤„äºâ€œæ­»äº¡â€çŠ¶æ€</li>
<li>æ·±åº¦ç½‘ç»œå±‚é—´ä¾èµ–ï¼šæ·±å±‚ç½‘ç»œä¸­çŸ©é˜µè¿ä¹˜å¯¼è‡´æ¢¯åº¦è¡°å‡æˆ–çˆ†ç‚¸ï¼ŒåŠ å‰§ç¨€ç–æ€§</li>
</ul>
</li>
<li><strong>ä¼˜åŒ–ç­–ç•¥ä¸æ­£åˆ™åŒ–</strong>
<ul>
<li>L1æ­£åˆ™åŒ–ï¼šé€šè¿‡æƒ©ç½šæƒé‡ç»å¯¹å€¼ï¼Œå¼ºåˆ¶ç¨€ç–å‚æ•°åˆ†å¸ƒï¼Œé—´æ¥å¯¼è‡´æ¢¯åº¦ç¨€ç–</li>
<li>æ¢¯åº¦è£å‰ªï¼šé™åˆ¶æ¢¯åº¦å¹…å€¼ï¼ŒæŠ‘åˆ¶å°æ¢¯åº¦æ›´æ–°</li>
</ul>
</li>
<li><strong>è®­ç»ƒæ•°æ®åˆ†å¸ƒ</strong>
<ul>
<li>æ•°æ®ä¸å‡è¡¡ï¼šé•¿å°¾æ•°æ®å¯¼è‡´éƒ¨åˆ†ç±»åˆ«æ¢¯åº¦è´¡çŒ®å¾®å¼±</li>
<li>ç‰¹å¾å†—ä½™ï¼šè¾“å…¥æ•°æ®ä¸­å­˜åœ¨å¤§é‡æ— å…³ç‰¹å¾ï¼Œç›¸å…³æ¢¯åº¦è¶‹è¿‘äºé›¶</li>
</ul>
</li>
</ol>
<h4 id="å¤„ç†æ–¹æ³•"><a class="markdownIt-Anchor" href="#å¤„ç†æ–¹æ³•"></a> <strong>å¤„ç†æ–¹æ³•</strong></h4>
<p><strong>ä¼˜åŒ–ç®—æ³•æ”¹è¿›</strong></p>
<ul>
<li><strong>åŠ¨é‡ä¿®æ­£ä¸è¯¯å·®è¡¥å¿</strong>ï¼šå¦‚DGCä¸­çš„Momentum Correctionï¼Œç¼“è§£å› ç¨€ç–åŒ–å¯¼è‡´çš„æ¢¯åº¦æ»åé—®é¢˜</li>
<li><strong>è‡ªé€‚åº”ä¼˜åŒ–å™¨</strong>ï¼šAdamç­‰ç®—æ³•åŠ¨æ€è°ƒæ•´å­¦ä¹ ç‡ï¼Œé¿å…å°æ¢¯åº¦å‚æ•°è¢«å®Œå…¨æŠ‘åˆ¶</li>
</ul>
<p><strong>æ•°æ®ä¸è®­ç»ƒç­–ç•¥è°ƒæ•´</strong></p>
<ul>
<li><strong>æ•°æ®å¢å¼ºä¸é‡é‡‡æ ·</strong>ï¼šå¹³è¡¡ç±»åˆ«åˆ†å¸ƒï¼Œæå‡å°¾éƒ¨æ•°æ®çš„æ¢¯åº¦è´¡çŒ®</li>
<li><strong>æ¸è¿›å¼ç¨€ç–è®­ç»ƒ</strong>ï¼šåˆæœŸä¿ç•™æ›´å¤šæ¢¯åº¦ï¼Œé€æ­¥å¢åŠ ç¨€ç–ç‡ä»¥é¿å…è¿‡æ—©ä¿¡æ¯ä¸¢å¤±</li>
</ul>
<h4 id="åº”ç”¨"><a class="markdownIt-Anchor" href="#åº”ç”¨"></a> åº”ç”¨</h4>
<ol>
<li>å‰ªæä¸æ¢¯åº¦é‡åŒ–</li>
<li></li>
</ol>
<h2 id="æ¿€æ´»å‡½æ•°"><a class="markdownIt-Anchor" href="#æ¿€æ´»å‡½æ•°"></a> æ¿€æ´»å‡½æ•°</h2>
<h3 id="1-å®šä¹‰"><a class="markdownIt-Anchor" href="#1-å®šä¹‰"></a> 1 å®šä¹‰</h3>
<p>å¼•å…¥<strong>éçº¿æ€§å› ç´ </strong>,å¤„ç†å¤æ‚çš„é—®é¢˜</p>
<h3 id="2-å¸¸è§æ¿€æ´»å‡½æ•°"><a class="markdownIt-Anchor" href="#2-å¸¸è§æ¿€æ´»å‡½æ•°"></a> 2 å¸¸è§æ¿€æ´»å‡½æ•°</h3>
<h4 id="1-sigmoid"><a class="markdownIt-Anchor" href="#1-sigmoid"></a> 1 Sigmoid</h4>
<img src="/2025/03/14/2025%E5%B9%B43%E6%9C%8816%E6%97%A5-DL%E5%85%AB%E8%82%A1%E6%96%87/image-20250320185054836.png" alt="image-20250320185054836" style="zoom:33%;"> 
<h4 id="2-tanh"><a class="markdownIt-Anchor" href="#2-tanh"></a> 2 Tanh</h4>
<img src="/2025/03/14/2025%E5%B9%B43%E6%9C%8816%E6%97%A5-DL%E5%85%AB%E8%82%A1%E6%96%87/image-20250320185034344.png" alt="image-20250320185034344" style="zoom: 33%;">  
<blockquote>
<p>å­˜åœ¨æ¢¯åº¦æ¶ˆå¤±çš„é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬çš„å¯¼æ•°ï¼ˆè¿ä¹˜ï¼‰åœ¨ä¸¤ç«¯ä¼šè¶‹è¿‘äºé›¶ï¼Œå¯¼è‡´æ·±å±‚ç½‘ç»œè®­ç»ƒå›°éš¾</p>
</blockquote>
<h4 id="3-relu"><a class="markdownIt-Anchor" href="#3-relu"></a> 3 relu</h4>
<img src="/2025/03/14/2025%E5%B9%B43%E6%9C%8816%E6%97%A5-DL%E5%85%AB%E8%82%A1%E6%96%87/image-20250320184950902.png" alt="image-20250320184950902" style="zoom: 67%;"> 
<h5 id="ä¼˜åŠ¿"><a class="markdownIt-Anchor" href="#ä¼˜åŠ¿"></a> ä¼˜åŠ¿</h5>
<ol>
<li><strong>ç¼“è§£æ¢¯åº¦æ¶ˆå¤±</strong>ï¼š
<ul>
<li>Sigmoid/Tanhçš„é¥±å’ŒåŒºï¼šå¯¼æ•°åœ¨è¾“å…¥ç»å¯¹å€¼è¾ƒå¤§æ—¶è¶‹è¿‘äº0ï¼ˆå¦‚Sigmoidå¯¼æ•°å€¼æœ€å¤§ä»…0.25ï¼‰ï¼Œå¯¼è‡´æ·±å±‚ç½‘ç»œæ¢¯åº¦é“¾å¼ç›¸ä¹˜åæŒ‡æ•°çº§è¡°å‡</li>
<li>ReLUçš„éé¥±å’Œæ€§ï¼š<strong>æ­£åŒºé—´çš„å¯¼æ•°ä¸º1</strong>ï¼Œä¿è¯æ¢¯åº¦ç¨³å®šä¼ é€’ï¼Œæ”¯æŒæ·±å±‚ç½‘ç»œè®­ç»ƒ</li>
</ul>
</li>
<li><strong>è®¡ç®—é«˜æ•ˆ</strong>ï¼šReLUä»…éœ€åˆ¤æ–­è¾“å…¥æ˜¯å¦å¤§äº0ï¼ˆ<strong>æ— æŒ‡æ•°è¿ç®—</strong>ï¼‰ï¼Œæ¯”Sigmoid/Tanhå¿«6å€ä»¥ä¸Šï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®å’Œå¤æ‚æ¨¡å‹</li>
<li><strong>ç¨€ç–æ¿€æ´»</strong>ï¼šReLUå°†è´Ÿè¾“å…¥å¼ºåˆ¶ç½®é›¶ï¼Œä½¿ç½‘ç»œ<strong>ç¨€ç–åŒ–</strong>ï¼ˆçº¦50%ç¥ç»å…ƒæ¿€æ´»ï¼‰ï¼Œé™ä½å‚æ•°ä¾èµ–æ€§å’Œè¿‡æ‹Ÿåˆé£é™©ï¼Œå¢å¼ºæ¨¡å‹é²æ£’æ€§</li>
</ol>
<h5 id="ä¸è¶³"><a class="markdownIt-Anchor" href="#ä¸è¶³"></a> ä¸è¶³</h5>
<ol>
<li>ä¸ºè´Ÿæ—¶ï¼ŒReLUè¾“å‡ºæ’ä¸º0ï¼Œæ¢¯åº¦ä¸º0ï¼Œå¯¼è‡´å¯¹åº”æƒé‡æ— æ³•æ›´æ–°ï¼ˆâ€œ<strong>æ­»äº¡</strong>â€ï¼‰</li>
</ol>
<h5 id="æ”¹è¿›"><a class="markdownIt-Anchor" href="#æ”¹è¿›"></a> æ”¹è¿›</h5>
<blockquote>
<p>æ”¹è¿›ReLUçš„æ–¹æ³•ï¼Œæ¯”å¦‚Leaky ReLUã€Parametric ReLUï¼ˆPReLUï¼‰å’ŒELUï¼Œ</p>
</blockquote>
<h2 id="æŸå¤±å‡½æ•°"><a class="markdownIt-Anchor" href="#æŸå¤±å‡½æ•°"></a> æŸå¤±å‡½æ•°</h2>
<blockquote>
<p>è§£é‡Šä»€ä¹ˆæ˜¯æŸå¤±å‡½æ•°ï¼Œå®ƒçš„ä½œç”¨ï¼Œå¸¸è§çš„æŸå¤±å‡½æ•°ç±»å‹ï¼Œä»¥åŠå¦‚ä½•æ ¹æ®ä¸åŒçš„ä»»åŠ¡é€‰æ‹©åˆé€‚çš„æŸå¤±å‡½æ•°ï¼Œè¿˜æœ‰åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­å¦‚ä½•ä¼˜åŒ–æŸå¤±ã€‚</p>
</blockquote>
<h3 id="1-å®šä¹‰-2"><a class="markdownIt-Anchor" href="#1-å®šä¹‰-2"></a> <strong>1 å®šä¹‰</strong>ï¼š</h3>
<p>æŸå¤±å‡½æ•°æ˜¯è¡¡é‡æ¨¡å‹é¢„æµ‹å€¼ä¸çœŸå®å€¼<strong>å·®å¼‚çš„é‡åŒ–æŒ‡æ ‡</strong>ï¼Œ</p>
<p><strong>ç”¨äºæŒ‡å¯¼æ¨¡å‹å‚æ•°ä¼˜åŒ–</strong>ã€‚åå‘ä¼ æ’­æ›´æ–°æ¢¯åº¦</p>
<p><img src="/2025/03/14/2025%E5%B9%B43%E6%9C%8816%E6%97%A5-DL%E5%85%AB%E8%82%A1%E6%96%87/image-20250320182842833.png" alt="image-20250320182842833"></p>
<h3 id="2-å¸¸è§"><a class="markdownIt-Anchor" href="#2-å¸¸è§"></a> 2 å¸¸è§</h3>
<ol>
<li><strong>å‡æ–¹è¯¯å·®</strong> ç»å¯¹è¯¯å·®ç­‰ç­‰</li>
<li>äº¤å‰ç†µ</li>
</ol>
<h1 id="æ¨¡å‹"><a class="markdownIt-Anchor" href="#æ¨¡å‹"></a> æ¨¡å‹</h1>
<h2 id="cnn"><a class="markdownIt-Anchor" href="#cnn"></a> CNN</h2>
<h3 id="0-å›¾åƒæ€§è´¨"><a class="markdownIt-Anchor" href="#0-å›¾åƒæ€§è´¨"></a> 0 å›¾åƒæ€§è´¨</h3>
<ol>
<li><strong>å¹³ç§»ä¸å˜æ€§</strong>ï¼šæ± åŒ–ä¸å·ç§¯æ ¸æ»‘åŠ¨ä½¿æ¨¡å‹å¯¹ç›®æ ‡ä½ç½®å˜åŒ–ä¸æ•æ„Ÿã€‚</li>
</ol>
<h3 id="1-å®šä¹‰-3"><a class="markdownIt-Anchor" href="#1-å®šä¹‰-3"></a> 1 å®šä¹‰</h3>
<p>æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡<strong>å±€éƒ¨æ„Ÿå—é‡</strong>å’Œ<strong>å‚æ•°å…±äº«</strong>ï¼Œé«˜æ•ˆæå–ç©ºé—´æˆ–æ—¶åºç‰¹å¾ã€‚<br>
ä»åŸå§‹åƒç´ ä¸­å­¦ä¹ åˆ°â€œè¾¹ç¼˜â†’çº¹ç†â†’ç‰©ä½“éƒ¨ä»¶â†’å®Œæ•´ç‰©ä½“â€çš„å±‚æ¬¡åŒ–ç‰¹å¾è¡¨ç¤º</p>
<h3 id="2-ç»„æˆ"><a class="markdownIt-Anchor" href="#2-ç»„æˆ"></a> 2 ç»„æˆ</h3>
<h4 id="å·ç§¯å±‚"><a class="markdownIt-Anchor" href="#å·ç§¯å±‚"></a> <strong>å·ç§¯å±‚</strong></h4>
<p><strong>å·ç§¯å±‚å †å </strong>ï¼š</p>
<ul>
<li>æµ…å±‚å·ç§¯æ ¸æå–è¾¹ç¼˜ã€é¢œè‰²ç­‰ä½çº§ç‰¹å¾ã€‚</li>
<li>æ·±å±‚å·ç§¯æ ¸ç»„åˆä½çº§ç‰¹å¾ï¼Œå½¢æˆé«˜çº§è¯­ä¹‰ï¼ˆå¦‚è½¦è½®ã€è½¦çª—</li>
</ul>
<h4 id="æ± åŒ–å±‚"><a class="markdownIt-Anchor" href="#æ± åŒ–å±‚"></a> <strong>æ± åŒ–å±‚</strong></h4>
<blockquote>
<p>å‡å°‘è®¡ç®—é‡å¹¶å¢å¼ºå¹³ç§»ä¸å˜æ€§ã€‚</p>
</blockquote>
<h2 id="resnet"><a class="markdownIt-Anchor" href="#resnet"></a> resnet</h2>
<h3 id="1æ€æƒ³"><a class="markdownIt-Anchor" href="#1æ€æƒ³"></a> 1<strong>æ€æƒ³</strong></h3>
<blockquote>
<p><strong>å­¦ä¹ æ®‹å·®è€Œéç›´æ¥å­¦ä¹ ç›®æ ‡æ˜ å°„</strong>   é€šè¿‡ï¼ˆè·³è·ƒè¿æ¥ï¼‰å®ç°æ®‹å·®å­¦ä¹ </p>
</blockquote>
<h3 id="2-è§£å†³é—®é¢˜"><a class="markdownIt-Anchor" href="#2-è§£å†³é—®é¢˜"></a> 2 è§£å†³é—®é¢˜</h3>
<h5 id="1-æ·±å±‚ç½‘ç»œé€€åŒ–degradation"><a class="markdownIt-Anchor" href="#1-æ·±å±‚ç½‘ç»œé€€åŒ–degradation"></a> 1. <strong>æ·±å±‚ç½‘ç»œé€€åŒ–ï¼ˆDegradationï¼‰</strong></h5>
<ul>
<li><strong>ç°è±¡</strong>ï¼šä¼ ç»ŸCNNï¼ˆå¦‚VGGï¼‰éšç€å±‚æ•°å¢åŠ ï¼ˆå¦‚20å±‚ä»¥ä¸Šï¼‰ï¼Œè®­ç»ƒè¯¯å·®å’Œæµ‹è¯•è¯¯å·®åè€Œä¸Šå‡ï¼Œ<strong>è¿™ä¸æ˜¯è¿‡æ‹Ÿåˆï¼Œè€Œæ˜¯æ¨¡å‹éš¾ä»¥ä¼˜åŒ–</strong>ã€‚</li>
<li><strong>åŸå› </strong>ï¼šå åŠ éçº¿æ€§å±‚å¯¼è‡´ä¿¡æ¯ä¼ é€’æ•ˆç‡ä¸‹é™ï¼Œæ·±å±‚ç½‘ç»œéš¾ä»¥å­¦ä¹ æœ‰æ•ˆçš„æ’ç­‰æ˜ å°„ï¼ˆIdentity Mappingï¼‰ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šè·³è·ƒè¿æ¥å¼ºåˆ¶ç½‘ç»œå­¦ä¹ æ®‹å·® F(x)<em>F</em>(<em>x</em>)ï¼Œå½“æœ€ä¼˜è§£æ¥è¿‘æ’ç­‰æ˜ å°„æ—¶ï¼ŒF(x)<em>F</em>(<em>x</em>) åªéœ€é€¼è¿‘0ï¼Œæ¯”ç›´æ¥æ‹Ÿåˆ H(x)=x<em>H</em>(<em>x</em>)=<em>x</em> æ›´ç®€å•ã€‚</li>
</ul>
<h5 id="2-æ¢¯åº¦æ¶ˆå¤±vanishing-gradient"><a class="markdownIt-Anchor" href="#2-æ¢¯åº¦æ¶ˆå¤±vanishing-gradient"></a> 2. <strong>æ¢¯åº¦æ¶ˆå¤±ï¼ˆVanishing Gradientï¼‰</strong></h5>
<ul>
<li><strong>ç°è±¡</strong>ï¼šåå‘ä¼ æ’­æ—¶ï¼Œæ¢¯åº¦åœ¨æ·±å±‚ç½‘ç»œä¸­é€å±‚è¿ä¹˜ï¼Œå¯¼è‡´æµ…å±‚æƒé‡æ›´æ–°ç¼“æ…¢ç”šè‡³åœæ»ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šè·³è·ƒè¿æ¥æä¾›<strong>æ¢¯åº¦é«˜é€Ÿå…¬è·¯</strong>ï¼Œæ¢¯åº¦å¯é€šè¿‡åŠ æ³•æ“ä½œç›´æ¥å›ä¼ è‡³æµ…å±‚ï¼ˆå¦‚å…¬å¼ âˆ‚Lâˆ‚x=âˆ‚Lâˆ‚H(x)â‹…(1+âˆ‚F(x)âˆ‚x)âˆ‚<em>x</em>âˆ‚<em>L</em>=âˆ‚<em>H</em>(<em>x</em>)âˆ‚<em>L</em>â‹…(1+âˆ‚<em>x</em>âˆ‚<em>F</em>(<em>x</em>))ï¼‰ï¼Œé¿å…æ¢¯åº¦è¢«å¤šæ¬¡éçº¿æ€§å˜æ¢ç¨€é‡Šã€‚</li>
</ul>
<h2 id="æ¨¡å‹éš¾ä»¥ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#æ¨¡å‹éš¾ä»¥ä¼˜åŒ–"></a> <strong>æ¨¡å‹éš¾ä»¥ä¼˜åŒ–</strong></h2>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://shakewely.github.io/2025/03/14/2025%E5%B9%B43%E6%9C%8816%E6%97%A5-DL%E5%85%AB%E8%82%A1%E6%96%87/" data-id="cm8q1tfhq0011pcv41q1mcut5" class="article-share-link">åˆ†äº«</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dl/" rel="tag">dl</a></li></ul>

    </footer>
  </div>
  
</article>




  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/2/">&amp;laquo; pre</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/4/">next &amp;raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <h1 class="blog-title">Weakliy_Blog</h1>
    <h2 class="blog-subtitle"></h2>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>ä¸»é¡µ</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>å½’æ¡£</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>åˆ†ç±»</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>æ ‡ç­¾</li>
          </a>
        
    </ul>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://raw.githubusercontent.com/ShakeWeLy/Weakliy.github.io/main/%E5%A4%B4%E5%83%8F/mmexport1683194148817.png">
    <h2 class="author">Weakliy</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>101</strong><br>æ–‡ç« </div></a>
      <a href="/categories"><div><strong>0</strong><br>åˆ†ç±»</div></a>
      <a href="/tags"><div><strong>31</strong><br>æ ‡ç­¾</div></a>
    </div>



    <div class="social-link">
      
        <a class="hvr-bounce-in" href="https://github.com/ShakeWeLy" target="_blank" title="Github">
          Github
        </a>
      
    </div>

    <div class="friend-link">
      <h2>è”ç³»æˆ‘</h2>
      
        <a class="hvr-bounce-in" href="https://github.com/ShakeWeLy" target="_blank" title="ShanaMaid">
          ShanaMaid
        </a>
      
    </div>
  </div>
</div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy;2024 - 2025 Weakliy<br>
      ç”±<a href="http://hexo.io/" target="_blank">Hexo</a>å¼ºåŠ›é©±åŠ¨ | 
      ä¸»é¢˜-<a target="_blank" rel="noopener" href="https://github.com/ShanaMaid/hexo-theme-shana">Shana</a>
      
    </div>
    
  </div>
</footer>
    </div>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//apps.bdimg.com/libs/wow/0.1.6/wow.min.js"></script>
<script>
new WOW().init();
</script>   


  
<link rel="stylesheet" href="/plugin/fancybox/jquery.fancybox.css">

  
<script src="/plugin/fancybox/jquery.fancybox.pack.js"></script>




  
<link rel="stylesheet" href="/plugin/galmenu/GalMenu.css">

  
<script src="/plugin/galmenu/GalMenu.js"></script>

  <div class="GalMenu GalDropDown">
      <div class="circle" id="gal">
        <div class="ring">
          
            <a href="/" title="" class="menuItem">é¦–é¡µ</a>
          
            <a href="/tags" title="" class="menuItem">æ ‡ç­¾</a>
          
            <a href="/categories" title="" class="menuItem">åˆ†ç±»</a>
          
            <a href="/archives" title="" class="menuItem">æ€»è§ˆ</a>
          
            <a href="/xxxxxxxxx" title="" class="menuItem">xxx</a>
          
            <a href="/xxxxxxx" title="" class="menuItem">xxxx</a>
          
        </div>
        
          <audio id="audio" src="#"></audio>
        
      </div> 
</div>
<div id="overlay" style="opacity: 1; cursor: pointer;"></div>
  <script type="text/javascript">var items = document.querySelectorAll('.menuItem');
    for (var i = 0,
    l = items.length; i < l; i++) {
      items[i].style.left = (50 - 35 * Math.cos( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%";
      items[i].style.top = (50 + 35 * Math.sin( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%"
    }</script>
<script type="text/javascript">
  $(document).ready(function() {
    $('body').GalMenu({
      'menu': 'GalDropDown'
    })
  });
</script>

  <section class="hidden-xs"> 
  <ul class="cb-slideshow"> 
    <li><span>è‹Ÿåˆ©</span></li> 
    <li><span>å›½å®¶</span></li> 
    <li><span>ç”Ÿæ­»ä»¥</span></li> 
    <li><span>å²‚èƒ½</span></li> 
    <li><span>ç¥¸ç¦</span></li> 
    <li><span>è¶‹é¿ä¹‹</span></li> 
  </ul>
</section>

<script src="/js/script.js"></script>




  </div>
</body>
</html>